<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO MEJORADO -->
    <title>VALHALLA - Bar de Cocteler√≠a de Lujo en Acapulco | Mixolog√≠a Artesanal</title>
    <meta name="description" content="Descubre VALHALLA, el santuario de la alquimia l√≠quida en Acapulco. Cocteler√≠a exclusiva, mixolog√≠a artesanal y experiencias √∫nicas. Reserva tu ritual.">
    <meta name="keywords" content="bar lujo Acapulco, cocteler√≠a artesanal, mixolog√≠a premium, bar exclusivo Guerrero, c√≥cteles signature">
    <meta name="author" content="VALHALLA">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#000000">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://valhalla-acapulco.com/">
    <meta property="og:title" content="VALHALLA - Santuario de la Alquimia L√≠quida">
    <meta property="og:description" content="Elixires exclusivos y experiencias inolvidables en el bar m√°s m√≠stico de Acapulco">
    <meta property="og:image" content="https://valhalla-acapulco.com/og-image.jpg">
    <meta property="og:locale" content="es_MX">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://valhalla-acapulco.com/">
    <meta property="twitter:title" content="VALHALLA - Bar de Lujo en Acapulco">
    <meta property="twitter:description" content="Mixolog√≠a artesanal y experiencias exclusivas">
    <meta property="twitter:image" content="https://valhalla-acapulco.com/twitter-image.jpg">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://valhalla-acapulco.com/">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    
    <!-- Preconnect para performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="https://api.anthropic.com">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,300;0,400;1,300&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
    
    <!-- Font Awesome con defer -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    
    <!-- EmailJS con defer -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <!-- Structured Data - Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "NightClub",
      "name": "VALHALLA",
      "description": "Bar de cocteler√≠a de lujo y mixolog√≠a artesanal en Acapulco",
      "image": "https://valhalla-acapulco.com/valhalla-main.jpg",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Calle Oculta (Casa de Dante)",
        "addressLocality": "Acapulco de Ju√°rez",
        "addressRegion": "Guerrero",
        "addressCountry": "MX"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "16.8531",
        "longitude": "-99.8237"
      },
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
          "opens": "20:00",
          "closes": "02:00"
        }
      ],
      "priceRange": "$$$$",
      "servesCuisine": "Cocktails",
      "telephone": "+52-744-XXX-XXXX",
      "email": "contacto@valhalla.com",
      "url": "https://valhalla-acapulco.com",
      "sameAs": [
        "https://www.facebook.com/valhalla.acapulco",
        "https://www.instagram.com/valhalla.acapulco"
      ]
    }
    </script>
    
    <!-- Menu Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Menu",
      "name": "Carta de C√≥cteles VALHALLA",
      "hasMenuSection": [
        {
          "@type": "MenuSection",
          "name": "Signature Collection",
          "hasMenuItem": [
            {
              "@type": "MenuItem",
              "name": "MIDNIGHT ORACLE",
              "description": "Whisky japon√©s Nikka, licor de flor de sa√∫co, bitter de ahumados artesanal",
              "offers": {
                "@type": "Offer",
                "price": "280",
                "priceCurrency": "MXN"
              }
            },
            {
              "@type": "MenuItem",
              "name": "OBSIDIAN DREAM",
              "description": "Mezcal ancestral, carb√≥n activado, reducci√≥n de agave negro",
              "offers": {
                "@type": "Offer",
                "price": "320",
                "priceCurrency": "MXN"
              }
            }
          ]
        }
      ]
    }
    </script>

    <style>
        /* ACCESSIBILITY IMPROVEMENTS */
        
        /* Skip Link para navegaci√≥n por teclado */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--gold-accent);
            color: var(--black-void);
            padding: 8px 16px;
            text-decoration: none;
            font-weight: bold;
            z-index: 100000;
            border-radius: 0 0 4px 0;
        }
        
        .skip-link:focus {
            top: 0;
            outline: 3px solid #fff;
            outline-offset: 2px;
        }
        
        /* Mejorar contraste de textos */
        :root {
            --text-primary: #ffffff;
            --text-secondary: #b8b8b8; /* Mejorado de #999 para mejor contraste */
            --text-muted: #888888;
        }
        
        /* Focus visible mejorado */
        *:focus-visible {
            outline: 3px solid var(--gold-accent);
            outline-offset: 3px;
        }
        
        /* Botones accesibles */
        button:focus-visible,
        a:focus-visible {
            outline: 3px solid var(--gold-accent);
            outline-offset: 3px;
        }
        
        /* Mejorar cursor solo en elementos interactivos */
        body {
            cursor: default; /* Cambio de crosshair a default */
        }
        
        a, button, input, select, textarea, .clickable {
            cursor: pointer;
        }
        
        /* Screen reader only class */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        /* Reduced motion para accesibilidad */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
        
        /* Mejorar contraste de descripciones */
        .cocktail-description,
        .experience-description,
        .ritual-description,
        .footer-section p {
            color: var(--text-secondary);
        }

        /* Indicadores de carga m√°s accesibles */
        .loading-screen[aria-hidden="true"] {
            display: none;
        }

        /* RESTO DEL CSS ORIGINAL AQU√ç (por brevidad lo resumo) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --black-void: #000000;
            --obsidian: #0a0a0a;
            --midnight: #121212;
            --shadow: #1a1a1a;
            --smoke: #2a2a2a;
            --gold-accent: #d4af37;
            --blood-accent: #8b0000;
            --whiskey: #704214;
            --bg:#070707;
            --card:#0f0f0f;
            --muted:#9b9b9b;
            --accent:#d4af37;
            --glass: rgba(255,255,255,0.03);
            --radius:18px;
            --goldShadow: 0 10px 40px rgba(212,175,55,0.08);
            font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            color-scheme: dark;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Helvetica Neue', sans-serif;
            background: var(--black-void);
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }

        /* Continue with all original styles... */
        /* (El CSS completo original va aqu√≠, manteniendo todas las animaciones y efectos) */


        /* Loading Screen */
.loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: var(--black-void);
    z-index: 100000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 1s ease;
}

.loading-screen.hidden {
    opacity: 0;
    pointer-events: none;
}

.loading-logo {
    font-size: 4rem;
    letter-spacing: 0.5rem;
    font-weight: 100;
    color: var(--gold-accent);
    animation: pulse-glow 2s infinite;
}

@keyframes pulse-glow {
    0%, 100% { 
        opacity: 0.3;
        text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
    }
    50% { 
        opacity: 1;
        text-shadow: 0 0 40px rgba(212, 175, 55, 0.8);
    }
}

/* Audio Control */
.audio-control {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    background: rgba(0,0,0,0.8);
    border: 1px solid var(--gold-accent);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10000;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.audio-control:hover {
    transform: scale(1.1);
    box-shadow: 0 0 30px rgba(212, 175, 55, 0.5);
}

.audio-control::before {
    content: '‚ô™';
    font-size: 24px;
    color: var(--gold-accent);
    animation: music-pulse 2s infinite;
}

.audio-control.muted::before {
    content: '‚ô™';
    text-decoration: line-through;
    animation: none;
}

@keyframes music-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
}

/* Navigation */
nav {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 2rem 4rem;
    z-index: 1000;
    background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, transparent 100%);
    backdrop-filter: blur(20px);
    transition: all 0.5s ease;
}

nav.scrolled {
    background: rgba(0,0,0,0.95);
    padding: 1rem 4rem;
}

.nav-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1400px;
    margin: 0 auto;
}

.logo {
    font-size: 2rem;
    letter-spacing: 0.5rem;
    font-weight: 100;
    color: var(--gold-accent);
    text-decoration: none;
    position: relative;
    transition: all 0.3s ease;
}

.logo::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 0;
    height: 1px;
    background: var(--gold-accent);
    transition: width 0.5s ease;
}

.logo:hover::after {
    width: 100%;
}

.nav-links {
    display: flex;
    gap: 3rem;
    list-style: none;
}

.nav-links a {
    color: #999;
    text-decoration: none;
    font-size: 0.9rem;
    letter-spacing: 0.1rem;
    transition: all 0.3s ease;
    position: relative;
}

.nav-links a:hover {
    color: var(--gold-accent);
}

/* Hero Carousel */
.hero-carousel {
    position: relative;
    height: 100vh;
    overflow: hidden;
    background: var(--black-void);
}

.carousel-container {
    position: relative;
    width: 100%;
    height: 100%;
}

.carousel-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 2s ease;
    background-size: cover;
    background-position: center;
}

.carousel-slide.active {
    opacity: 1;
}

.carousel-slide:nth-child(1) {
    background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                url('1.jpg');
    background-size: cover;
    background-position: center center;
}

.carousel-slide:nth-child(2) {
    background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                url('2.jpg');
    background-size: cover;
    background-position: center center;
}

.carousel-slide:nth-child(3) {
    background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                url('3.jpg');
    background-size: cover;
    background-position: center center;
}

.carousel-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.4) 100%);
    pointer-events: none;
}

/* Hero Content */
.hero-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 10;
}

.hero-title {
    font-size: clamp(3rem, 8vw, 7rem);
    font-weight: 100;
    letter-spacing: 1.5rem;
    margin-bottom: 1rem;
    opacity: 0;
    animation: fadeInUp 2s ease forwards;
    animation-delay: 0.5s;
    text-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
}

.hero-subtitle {
    font-size: 1.2rem;
    letter-spacing: 0.3rem;
    color: var(--gold-accent);
    opacity: 0;
    animation: fadeInUp 2s ease forwards;
    animation-delay: 1s;
}

.hero-cta {
    margin-top: 3rem;
    display: inline-block;
    padding: 1rem 3rem;
    border: 1px solid var(--gold-accent);
    color: var(--gold-accent);
    text-decoration: none;
    letter-spacing: 0.2rem;
    transition: all 0.5s ease;
    position: relative;
    overflow: hidden;
    opacity: 0;
    animation: fadeInUp 2s ease forwards;
    animation-delay: 1.5s;
}

.hero-cta::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: var(--gold-accent);
    transition: left 0.5s ease;
    z-index: -1;
}

.hero-cta:hover {
    color: var(--black-void);
}

.hero-cta:hover::before {
    left: 0;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Carousel Indicators */
.carousel-indicators {
    position: absolute;
    bottom: 3rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 1rem;
    z-index: 20;
}

.indicator {
    width: 50px;
    height: 2px;
    background: rgba(255,255,255,0.3);
    border: none;
    cursor: pointer;
    transition: all 0.5s ease;
}

.indicator.active {
    background: var(--gold-accent);
}

/* Cocktail Grid */
.cocktail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 3rem;
    margin-top: 5rem;
}

.cocktail-card {
    background: var(--shadow);
    padding: 2rem;
    position: relative;
    overflow: hidden;
    transition: all 0.5s ease;
    border: 1px solid var(--smoke);
    border-radius: 8px;
}

.cocktail-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold-accent), transparent);
    transform: translateX(-100%);
    transition: transform 0.5s ease;
}

.cocktail-card:hover::before {
    transform: translateX(100%);
}

.cocktail-card:hover {
    transform: translateY(-10px);
    border-color: var(--gold-accent);
    box-shadow: 0 10px 40px rgba(212, 175, 55, 0.2);
}

.cocktail-name {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: var(--gold-accent);
    letter-spacing: 0.1rem;
}

.cocktail-description {
    color: #999;
    line-height: 1.6;
    margin-bottom: 1.5rem;
}

.cocktail-price {
    font-size: 1.2rem;
    color: var(--gold-accent);
    font-weight: 300;
}

/* Philosophy */
.philosophy {
    background: linear-gradient(180deg, var(--midnight) 0%, var(--shadow) 100%);
    padding: 10rem 4rem;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.philosophy::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(212,175,55,0.05) 0%, transparent 70%);
    animation: pulse 10s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.1); }
}

.philosophy-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.6rem;
    font-weight: 300;
    font-style: italic;
    line-height: 2;
    max-width: 800px;
    margin: 0 auto;
    color: #ccc;
    position: relative;
    z-index: 1;
    letter-spacing: 0.5px;
}

.philosophy-highlight {
    color: var(--gold-accent);
    font-weight: 300;
}

/* Experience Section */
.experience {
    background: var(--black-void);
    padding: 8rem 4rem;
    position: relative;
}

.experience-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 4rem;
    margin-top: 4rem;
}

.experience-item {
    text-align: center;
    padding: 2rem;
    border: 1px solid var(--smoke);
    position: relative;
    transition: all 0.5s ease;
    border-radius: 8px;
}

.experience-item::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 0;
    height: 0;
    background: radial-gradient(circle, rgba(212,175,55,0.2) 0%, transparent 70%);
    transition: all 0.5s ease;
}

.experience-item:hover::after {
    width: 200%;
    height: 200%;
}

.experience-item:hover {
    border-color: var(--gold-accent);
}

.experience-icon {
    font-size: 3rem;
    color: var(--gold-accent);
    margin-bottom: 1rem;
}

.experience-title {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    letter-spacing: 0.2rem;
    color: var(--gold-accent);
}

.experience-description {
    color: #999;
    line-height: 1.6;
}

/* Ritual Steps */
.ritual-steps {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    margin-top: 5rem;
}

.ritual-step {
    position: relative;
    padding: 2rem;
    text-align: center;
}

.ritual-number {
    font-size: 4rem;
    color: var(--gold-accent);
    opacity: 0.2;
    font-weight: 100;
    margin-bottom: 1rem;
}

.ritual-title {
    font-size: 1.2rem;
    color: var(--gold-accent);
    margin-bottom: 1rem;
    letter-spacing: 0.2rem;
}

.ritual-description {
    color: #999;
    font-size: 0.9rem;
    line-height: 1.6;
}

/* Floating Elements */
.floating-element {
    position: fixed;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(212,175,55,0.1) 0%, transparent 70%);
    pointer-events: none;
    z-index: 1;
    animation: float 20s infinite ease-in-out;
}

.floating-element:nth-child(1) {
    top: 10%;
    left: -150px;
    animation-delay: 0s;
}

.floating-element:nth-child(2) {
    top: 60%;
    right: -150px;
    animation-delay: 10s;
}

@keyframes float {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(50px, -50px) scale(1.1); }
    66% { transform: translate(-50px, 50px) scale(0.9); }
}

/* Mystical Lines */
.mystical-lines {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
    opacity: 0.03;
}

.line {
    position: absolute;
    background: var(--gold-accent);
    animation: line-move 20s linear infinite;
}

.line:nth-child(1) {
    width: 1px;
    height: 100%;
    left: 10%;
    animation-duration: 25s;
}

.line:nth-child(2) {
    width: 100%;
    height: 1px;
    top: 20%;
    animation-duration: 30s;
}

.line:nth-child(3) {
    width: 1px;
    height: 100%;
    left: 80%;
    animation-duration: 22s;
}

@keyframes line-move {
    0% { transform: translateY(-100%); }
    100% { transform: translateY(100%); }
}
    </style>
</head>

<body>
    <!-- Skip Link para accesibilidad -->
    <a href="#main-content" class="skip-link">Saltar al contenido principal</a>

    <!-- Audio Element con atributos de accesibilidad -->
    <audio id="backgroundMusic" loop aria-label="M√∫sica de ambiente">
        <source src="idea22.mpeg" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- Audio Control Button mejorado -->
    <button 
        class="audio-control" 
        id="audioControl" 
        aria-label="Controlar m√∫sica de fondo"
        aria-pressed="false"
        title="Reproducir/Pausar m√∫sica">
        <span class="sr-only">Controlar m√∫sica de ambiente</span>
    </button>

    <!-- Loading Screen con ARIA -->
    <div class="loading-screen" id="loadingScreen" role="alert" aria-live="polite" aria-label="Cargando sitio web">
        <div class="loading-logo" aria-hidden="true">VALHALLA</div>
        <span class="sr-only">Cargando, por favor espera...</span>
    </div>

    <!-- Navigation con ARIA mejorado -->
    <nav id="navbar" role="navigation" aria-label="Navegaci√≥n principal">
        <div class="nav-container">
            <a href="#home" class="logo" aria-label="VALHALLA - Inicio">VALHALLA</a>
            <ul class="nav-links" role="menubar">
                <li role="none"><a href="#cocktails" role="menuitem">COCKTAILS</a></li>
                <li role="none"><a href="#experience" role="menuitem">EXPERIENCIA</a></li>
                <li role="none"><a href="#philosophy" role="menuitem">FILOSOF√çA</a></li>
                <li role="none"><a href="#ritual" role="menuitem">RITUAL</a></li>
                <li role="none"><a href="#reservation" role="menuitem">RESERVAS</a></li>
                <li role="none"><a href="#contact" role="menuitem">CONTACTO</a></li>
            </ul>
        </div>
    </nav>

    <main id="main-content">
        <!-- Hero Carousel con ARIA mejorado -->
        <section 
            class="hero-carousel" 
            id="home" 
            aria-roledescription="carrusel" 
            aria-label="Im√°genes destacadas de VALHALLA">
            
            <div class="carousel-container">
                <div class="carousel-slide active" role="group" aria-roledescription="slide" aria-label="Slide 1 de 3">
                    <span class="sr-only">Interior del bar VALHALLA con iluminaci√≥n dorada</span>
                </div>
                <div class="carousel-slide" role="group" aria-roledescription="slide" aria-label="Slide 2 de 3" aria-hidden="true">
                    <span class="sr-only">C√≥cteles signature en cristaler√≠a exclusiva</span>
                </div>
                <div class="carousel-slide" role="group" aria-roledescription="slide" aria-label="Slide 3 de 3" aria-hidden="true">
                    <span class="sr-only">Ambiente nocturno del sanctum</span>
                </div>
                <div class="carousel-overlay" aria-hidden="true"></div>
            </div>

            <div class="hero-content">
                <h1 class="hero-title">VALHALLA</h1>
                <p class="hero-subtitle">SANTUARIO DE LA ALQUIMIA</p>
                <a href="#reservation" class="hero-cta" role="button">RESERVAR EXPERIENCIA</a>
            </div>

            <div class="carousel-indicators" role="group" aria-label="Controles del carrusel">
                <button 
                    class="indicator active" 
                    data-slide="0" 
                    aria-label="Ir a slide 1"
                    aria-current="true"></button>
                <button 
                    class="indicator" 
                    data-slide="1" 
                    aria-label="Ir a slide 2"></button>
                <button 
                    class="indicator" 
                    data-slide="2" 
                    aria-label="Ir a slide 3"></button>
            </div>
        </section>



    <script>
        // Accessibility improvements para loading screen
        window.addEventListener('load', function() {
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                loadingScreen.classList.add('hidden');
                loadingScreen.setAttribute('aria-hidden', 'true');
            }, 2000);
        });

        // Audio control con mejor accesibilidad
        window.addEventListener('DOMContentLoaded', function() {
            const audio = document.getElementById('backgroundMusic');
            const audioControl = document.getElementById('audioControl');
            let isPlaying = false;

            const startAudio = () => {
                if (!isPlaying) {
                    audio.currentTime = 0;
                    audio.play().then(() => {
                        isPlaying = true;
                        audioControl.classList.remove('muted');
                        audioControl.setAttribute('aria-pressed', 'true');
                        audioControl.setAttribute('aria-label', 'Pausar m√∫sica de fondo');
                    }).catch(e => {
                        console.log('Auto-play prevented');
                    });
                }
            };

            audioControl.addEventListener('click', function() {
                if (isPlaying) {
                    audio.pause();
                    audioControl.classList.add('muted');
                    audioControl.setAttribute('aria-pressed', 'false');
                    audioControl.setAttribute('aria-label', 'Reproducir m√∫sica de fondo');
                    isPlaying = false;
                } else {
                    audio.play();
                    audioControl.classList.remove('muted');
                    audioControl.setAttribute('aria-pressed', 'true');
                    audioControl.setAttribute('aria-label', 'Pausar m√∫sica de fondo');
                    isPlaying = true;
                }
            });

            // Keyboard accessibility para audio control
            audioControl.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });

        // Carousel con mejor navegaci√≥n por teclado
        document.addEventListener('DOMContentLoaded', function() {
            const indicators = document.querySelectorAll('.indicator');
            
            indicators.forEach((indicator, index) => {
                // Keyboard navigation
                indicator.addEventListener('keydown', function(e) {
                    if (e.key === 'ArrowRight') {
                        e.preventDefault();
                        const nextIndex = (index + 1) % indicators.length;
                        indicators[nextIndex].focus();
                        indicators[nextIndex].click();
                    } else if (e.key === 'ArrowLeft') {
                        e.preventDefault();
                        const prevIndex = (index - 1 + indicators.length) % indicators.length;
                        indicators[prevIndex].focus();
                        indicators[prevIndex].click();
                    }
                });
            });
        });
    </script>


<!-- PARTE 2: SECCIONES DE CONTENIDO OPTIMIZADAS -->
<!-- Esto se inserta despu√©s del hero carousel en el <main> -->

<!-- Cocktails Section con mejoras de accesibilidad y responsive -->
<section class="section" id="cocktails">
    <div class="container">
        <h2 class="section-title reveal">ELIXIRES EXCLUSIVOS</h2>
        <p class="section-description" style="text-align: center; color: var(--text-secondary); max-width: 700px; margin: 0 auto 2rem;">
            Descubre nuestra colecci√≥n de c√≥cteles artesanales, cada uno una obra maestra l√≠quida creada por nuestros maestros mix√≥logos.
        </p>
        <h3 class="signature-title" aria-label="Colecci√≥n Signature">SIGNATURE COLLECTION</h3>
        
        <div class="cocktail-grid" role="list">
            <!-- Cocktail Card 1 -->
            <article class="cocktail-card reveal" role="listitem">
                <h3 class="cocktail-name">MIDNIGHT ORACLE</h3>
                <p class="cocktail-description">
                    Whisky japon√©s Nikka, licor de flor de sa√∫co, bitter de ahumados artesanal, cristales de oro comestible
                </p>
                <p class="cocktail-price">
                    <span class="sr-only">Precio:</span>
                    $280 <abbr title="Pesos mexicanos" aria-label="Pesos mexicanos">MXN</abbr>
                </p>
                <div class="cocktail-meta" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <span class="cocktail-tag" aria-label="Categor√≠a">ü•É Whisky Base</span>
                    <span class="cocktail-tag" aria-label="Intensidad">‚≠ê Intensidad Media</span>
                </div>
            </article>
            
            <!-- Cocktail Card 2 -->
            <article class="cocktail-card reveal" role="listitem">
                <h3 class="cocktail-name">OBSIDIAN DREAM</h3>
                <p class="cocktail-description">
                    Mezcal ancestral, carb√≥n activado, reducci√≥n de agave negro, espuma de c√≠tricos quemados
                </p>
                <p class="cocktail-price">
                    <span class="sr-only">Precio:</span>
                    $320 <abbr title="Pesos mexicanos" aria-label="Pesos mexicanos">MXN</abbr>
                </p>
                <div class="cocktail-meta" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <span class="cocktail-tag">üî• Mezcal Base</span>
                    <span class="cocktail-tag">‚≠ê‚≠ê Intensidad Alta</span>
                </div>
            </article>
            
            <!-- Cocktail Card 3 -->
            <article class="cocktail-card reveal" role="listitem">
                <h3 class="cocktail-name">GOLDEN DEITY</h3>
                <p class="cocktail-description">
                    Hennessy Paradis, Dom P√©rignon, extracto de trufa blanca, l√°minas de oro 24k
                </p>
                <p class="cocktail-price" style="color: #FFD700;">
                    <span class="sr-only">Precio premium:</span>
                    $1,850 <abbr title="Pesos mexicanos" aria-label="Pesos mexicanos">MXN</abbr>
                    <span style="display: block; font-size: 0.75rem; margin-top: 0.5rem;">üëë Experiencia Premium</span>
                </p>
                <div class="cocktail-meta" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <span class="cocktail-tag">üçæ Cognac & Champagne</span>
                    <span class="cocktail-tag">‚≠ê‚≠ê‚≠ê Exclusivo</span>
                </div>
            </article>
            
            <!-- Cocktail Card 4 -->
            <article class="cocktail-card reveal" role="listitem">
                <h3 class="cocktail-name">SHADOW WALKER</h3>
                <p class="cocktail-description">
                    Vodka Grey Goose, tinta de calamar, caviar de lim√≥n, esencia de pepino negro
                </p>
                <p class="cocktail-price">
                    <span class="sr-only">Precio:</span>
                    $290 <abbr title="Pesos mexicanos" aria-label="Pesos mexicanos">MXN</abbr>
                </p>
                <div class="cocktail-meta" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <span class="cocktail-tag">üç∏ Vodka Base</span>
                    <span class="cocktail-tag">‚≠ê Suave</span>
                </div>
            </article>
            
            <!-- Cocktail Card 5 -->
            <article class="cocktail-card reveal" role="listitem">
                <h3 class="cocktail-name">NORSE FIRE</h3>
                <p class="cocktail-description">
                    Aquavit noruego, reducci√≥n de bayas √°rticas, fuego de romero, hielo de glaciar
                </p>
                <p class="cocktail-price">
                    <span class="sr-only">Precio:</span>
                    $340 <abbr title="Pesos mexicanos" aria-label="Pesos mexicanos">MXN</abbr>
                </p>
                <div class="cocktail-meta" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <span class="cocktail-tag">‚ùÑÔ∏è Aquavit Base</span>
                    <span class="cocktail-tag">‚≠ê‚≠ê Intensidad Media-Alta</span>
                </div>
            </article>
            
            <!-- Cocktail Card 6 -->
            <article class="cocktail-card reveal" role="listitem">
                <h3 class="cocktail-name">ETERNAL NIGHT</h3>
                <p class="cocktail-description">
                    Absenta negra, chartreuse VEP, elixir de violetas nocturnas, niebla de incienso
                </p>
                <p class="cocktail-price">
                    <span class="sr-only">Precio:</span>
                    $380 <abbr title="Pesos mexicanos" aria-label="Pesos mexicanos">MXN</abbr>
                </p>
                <div class="cocktail-meta" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <span class="cocktail-tag">üåø Absenta Base</span>
                    <span class="cocktail-tag">‚≠ê‚≠ê‚≠ê Muy Intenso</span>
                </div>
            </article>
        </div>
        
        <!-- CTA para ver carta completa -->
        <div style="text-align: center; margin-top: 4rem;">
            <a href="#reservation" class="cta-button" role="button">
                <i class="fas fa-book-open" aria-hidden="true"></i>
                VER CARTA COMPLETA
            </a>
        </div>
    </div>
</section>

<!-- Experience Section mejorada -->
<section class="experience section" id="experience">
    <div class="container">
        <h2 class="section-title reveal">LA EXPERIENCIA VALHALLA</h2>
        <p class="section-description" style="text-align: center; color: var(--text-secondary); max-width: 800px; margin: 0 auto 3rem;">
            M√°s que un bar, VALHALLA es un viaje sensorial donde cada detalle est√° dise√±ado para trascender lo ordinario.
        </p>
        
        <div class="experience-grid">
            <!-- Experience Item 1 -->
            <article class="experience-item reveal">
                <div class="experience-icon" aria-hidden="true">‚öóÔ∏è</div>
                <h3 class="experience-title">ALQUIMIA</h3>
                <p class="experience-description">
                    Nuestros maestros mix√≥logos transforman ingredientes excepcionales en obras de arte l√≠quidas. 
                    Cada c√≥ctel es preparado con t√©cnicas de vanguardia y presentaci√≥n teatral.
                </p>
                <ul class="experience-features" style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem; list-style: none; padding: 0;">
                    <li style="padding: 0.3rem 0;">‚úì Ingredientes premium importados</li>
                    <li style="padding: 0.3rem 0;">‚úì T√©cnicas de mixolog√≠a molecular</li>
                    <li style="padding: 0.3rem 0;">‚úì Presentaci√≥n con efectos visuales</li>
                </ul>
            </article>
            
            <!-- Experience Item 2 -->
            <article class="experience-item reveal">
                <div class="experience-icon" aria-hidden="true">üåô</div>
                <h3 class="experience-title">ATM√ìSFERA</h3>
                <p class="experience-description">
                    Un santuario nocturno donde el tiempo se detiene y cada momento se vuelve eterno. 
                    Iluminaci√≥n ambiental, m√∫sica curada y dise√±o m√≠stico.
                </p>
                <ul class="experience-features" style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem; list-style: none; padding: 0;">
                    <li style="padding: 0.3rem 0;">‚úì Iluminaci√≥n din√°mica personalizada</li>
                    <li style="padding: 0.3rem 0;">‚úì M√∫sica en vivo selecta</li>
                    <li style="padding: 0.3rem 0;">‚úì Espacios √≠ntimos y exclusivos</li>
                </ul>
            </article>
            
            <!-- Experience Item 3 -->
            <article class="experience-item reveal">
                <div class="experience-icon" aria-hidden="true">üëë</div>
                <h3 class="experience-title">EXCLUSIVIDAD</h3>
                <p class="experience-description">
                    Acceso limitado para aquellos que buscan experiencias m√°s all√° de lo ordinario. 
                    Reservaciones requeridas y servicio personalizado VIP.
                </p>
                <ul class="experience-features" style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem; list-style: none; padding: 0;">
                    <li style="padding: 0.3rem 0;">‚úì Capacidad limitada</li>
                    <li style="padding: 0.3rem 0;">‚úì Servicio de sommelier de c√≥cteles</li>
                    <li style="padding: 0.3rem 0;">‚úì Eventos privados disponibles</li>
                </ul>
            </article>
        </div>
        
        <!-- Estad√≠sticas -->
        <div class="stats-container" style="margin-top: 5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; text-align: center;">
            <div class="stat-item reveal">
                <div class="stat-number" style="font-size: 3rem; color: var(--gold-accent); font-weight: 100;">50+</div>
                <div class="stat-label" style="color: var(--text-secondary); margin-top: 0.5rem;">C√≥cteles Signature</div>
            </div>
            <div class="stat-item reveal">
                <div class="stat-number" style="font-size: 3rem; color: var(--gold-accent); font-weight: 100;">10+</div>
                <div class="stat-label" style="color: var(--text-secondary); margin-top: 0.5rem;">A√±os de Experiencia</div>
            </div>
            <div class="stat-item reveal">
                <div class="stat-number" style="font-size: 3rem; color: var(--gold-accent); font-weight: 100;">5‚òÖ</div>
                <div class="stat-label" style="color: var(--text-secondary); margin-top: 0.5rem;">Calificaci√≥n Promedio</div>
            </div>
            <div class="stat-item reveal">
                <div class="stat-number" style="font-size: 3rem; color: var(--gold-accent); font-weight: 100;">100%</div>
                <div class="stat-label" style="color: var(--text-secondary); margin-top: 0.5rem;">Satisfacci√≥n Garantizada</div>
            </div>
        </div>
    </div>
</section>

<!-- Philosophy Section mejorada -->
<section class="philosophy" id="philosophy">
    <div class="container">
        <h2 class="section-title reveal">FILOSOF√çA</h2>
        
        <blockquote class="philosophy-text reveal" cite="https://valhalla-acapulco.com/filosofia">
            En <strong class="philosophy-highlight">VALHALLA</strong>, cada c√≥ctel es una obra maestra l√≠quida, 
            una sinfon√≠a de sabores que trasciende lo ordinario. Nuestros alquimistas del bar no simplemente mezclan bebidas; 
            <strong class="philosophy-highlight">crean experiencias</strong> que despiertan los sentidos y elevan el esp√≠ritu. 
            Aqu√≠, en este santuario nocturno, el tiempo se suspende y cada sorbo cuenta una historia de 
            <strong class="philosophy-highlight">elegancia infinita</strong>.
        </blockquote>
        
        <!-- Principios fundamentales -->
        <div class="philosophy-principles" style="margin-top: 5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 3rem;">
            <div class="principle-item reveal" style="text-align: center; padding: 2rem; border: 1px solid rgba(212,175,55,0.2); border-radius: 8px;">
                <div class="principle-icon" style="font-size: 3rem; margin-bottom: 1rem;" aria-hidden="true">üé≠</div>
                <h3 style="color: var(--gold-accent); margin-bottom: 1rem; font-size: 1.2rem; letter-spacing: 0.1rem;">ARTE</h3>
                <p style="color: var(--text-secondary); line-height: 1.6; font-size: 0.95rem;">
                    Cada creaci√≥n es una expresi√≥n art√≠stica, donde la est√©tica y el sabor se fusionan en perfecta armon√≠a.
                </p>
            </div>
            
            <div class="principle-item reveal" style="text-align: center; padding: 2rem; border: 1px solid rgba(212,175,55,0.2); border-radius: 8px;">
                <div class="principle-icon" style="font-size: 3rem; margin-bottom: 1rem;" aria-hidden="true">üî¨</div>
                <h3 style="color: var(--gold-accent); margin-bottom: 1rem; font-size: 1.2rem; letter-spacing: 0.1rem;">PRECISI√ìN</h3>
                <p style="color: var(--text-secondary); line-height: 1.6; font-size: 0.95rem;">
                    Medidas exactas, temperaturas controladas y timing perfecto. La ciencia detr√°s de cada sabor excepcional.
                </p>
            </div>
            
            <div class="principle-item reveal" style="text-align: center; padding: 2rem; border: 1px solid rgba(212,175,55,0.2); border-radius: 8px;">
                <div class="principle-icon" style="font-size: 3rem; margin-bottom: 1rem;" aria-hidden="true">üíé</div>
                <h3 style="color: var(--gold-accent); margin-bottom: 1rem; font-size: 1.2rem; letter-spacing: 0.1rem;">EXCELENCIA</h3>
                <p style="color: var(--text-secondary); line-height: 1.6; font-size: 0.95rem;">
                    Solo los mejores ingredientes, las t√©cnicas m√°s refinadas y el servicio m√°s atento definen nuestra esencia.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Ritual Section mejorada -->
<section class="ritual section" id="ritual">
    <div class="container">
        <h2 class="section-title reveal glitch" data-text="NUESTRO PROCESO">NUESTRO PROCESO</h2>
        <p class="section-description" style="text-align: center; color: var(--text-secondary); max-width: 700px; margin: 0 auto 3rem;">
            Desde el momento en que cruzas nuestras puertas, cada paso est√° dise√±ado para sumergirte en una experiencia √∫nica.
        </p>
        
        <div class="ritual-steps">
            <!-- Step 1 -->
            <article class="ritual-step reveal">
                <div class="ritual-number" aria-hidden="true">I</div>
                <h3 class="ritual-title">BIENVENIDA</h3>
                <p class="ritual-description">
                    Te recibimos en un ambiente √∫nico dise√±ado para tu comodidad. Nuestro host te gu√≠a a tu espacio reservado, 
                    cuidadosamente seleccionado seg√∫n tus preferencias.
                </p>
                <div style="margin-top: 1rem; color: var(--gold-accent); font-size: 0.9rem;">
                    ‚è± Duraci√≥n: 5 minutos
                </div>
            </article>
            
            <!-- Step 2 -->
            <article class="ritual-step reveal">
                <div class="ritual-number" aria-hidden="true">II</div>
                <h3 class="ritual-title">PREPARACI√ìN</h3>
                <p class="ritual-description">
                    Nuestros bartenders crean tu c√≥ctel con t√©cnicas avanzadas en mixolog√≠a e ingredientes de nuestra reserva privada. 
                    Observa el arte en acci√≥n desde tu mesa.
                </p>
                <div style="margin-top: 1rem; color: var(--gold-accent); font-size: 0.9rem;">
                    ‚è± Duraci√≥n: 8-12 minutos
                </div>
            </article>
            
            <!-- Step 3 -->
            <article class="ritual-step reveal">
                <div class="ritual-number" aria-hidden="true">III</div>
                <h3 class="ritual-title">PRESENTACI√ìN</h3>
                <p class="ritual-description">
                    Cada bebida se sirve con cuidado en cristaler√≠a de la casa. Tu sommelier de c√≥cteles te explica los matices, 
                    ingredientes y la historia detr√°s de tu elecci√≥n.
                </p>
                <div style="margin-top: 1rem; color: var(--gold-accent); font-size: 0.9rem;">
                    ‚è± Duraci√≥n: 3-5 minutos
                </div>
            </article>
            
            <!-- Step 4 -->
            <article class="ritual-step reveal">
                <div class="ritual-number" aria-hidden="true">IV</div>
                <h3 class="ritual-title">EXPERIENCIA</h3>
                <p class="ritual-description">
                    Disfruta de sabores √∫nicos en un ambiente sofisticado. Cada sorbo es un viaje sensorial, acompa√±ado por la 
                    atm√≥sfera envolvente de VALHALLA.
                </p>
                <div style="margin-top: 1rem; color: var(--gold-accent); font-size: 0.9rem;">
                    ‚è± Duraci√≥n: Ilimitada ‚ú®
                </div>
            </article>
        </div>
        
        <!-- CTA -->
        <div style="text-align: center; margin-top: 4rem;">
            <a href="#reservation" class="cta-button" role="button">
                <i class="fas fa-calendar-check" aria-hidden="true"></i>
                INICIAR TU RITUAL AHORA
            </a>
        </div>
    </div>
</section>

<!-- CSS ADICIONAL PARA ESTA PARTE -->
<style>
    /* Section Description */
    .section-description {
        font-size: 1.1rem;
        line-height: 1.8;
    }
    
    /* CTA Button mejorado */
    .cta-button {
        display: inline-flex;
        align-items: center;
        gap: 0.8rem;
        padding: 1.2rem 2.5rem;
        background: linear-gradient(135deg, rgba(212,175,55,0.1) 0%, rgba(212,175,55,0.05) 100%);
        border: 2px solid var(--gold-accent);
        color: var(--gold-accent);
        text-decoration: none;
        font-weight: 600;
        letter-spacing: 0.15rem;
        transition: all 0.4s ease;
        border-radius: 4px;
        position: relative;
        overflow: hidden;
    }
    
    .cta-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: var(--gold-accent);
        transition: left 0.4s ease;
        z-index: -1;
    }
    
    .cta-button:hover {
        color: var(--black-void);
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(212,175,55,0.3);
    }
    
    .cta-button:hover::before {
        left: 0;
    }
    
    .cta-button:focus-visible {
        outline: 3px solid var(--gold-accent);
        outline-offset: 4px;
    }
    
    /* Cocktail meta tags */
    .cocktail-meta {
        display: flex;
        gap: 0.8rem;
        flex-wrap: wrap;
    }
    
    .cocktail-tag {
        padding: 0.3rem 0.8rem;
        background: rgba(212,175,55,0.08);
        border: 1px solid rgba(212,175,55,0.15);
        border-radius: 4px;
        font-size: 0.85rem;
    }
    
    /* Experience features list */
    .experience-features li {
        transition: color 0.3s ease;
    }
    
    .experience-features li:hover {
        color: var(--gold-accent);
    }
    
    /* Stats animation */
    .stat-number {
        transition: transform 0.3s ease, color 0.3s ease;
    }
    
    .stat-item:hover .stat-number {
        transform: scale(1.1);
        color: #FFD700;
    }
    
    /* Philosophy blockquote */
    .philosophy-text {
        border-left: 4px solid var(--gold-accent);
        padding-left: 2rem;
        margin: 2rem auto;
    }
    
    /* Principle items hover */
    .principle-item {
        transition: all 0.4s ease;
    }
    
    .principle-item:hover {
        border-color: var(--gold-accent);
        transform: translateY(-8px);
        box-shadow: 0 10px 30px rgba(212,175,55,0.2);
    }
    
    /* Ritual step enhancements */
    .ritual-step {
        transition: all 0.4s ease;
    }
    
    .ritual-step:hover {
        transform: translateY(-5px);
    }
    
    /* Responsive mejoras */
    @media (max-width: 768px) {
        .cocktail-grid {
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        .experience-grid {
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        .ritual-steps {
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        .stats-container {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .philosophy-text {
            font-size: 1.3rem;
            padding-left: 1rem;
        }
        
        .section-title {
            font-size: 2rem;
        }
        
        .signature-title {
            font-size: 2.5rem;
        }
    }
    
    @media (max-width: 480px) {
        .cocktail-meta {
            flex-direction: column;
        }
        
        .stats-container {
            grid-template-columns: 1fr;
        }
        
        .stat-number {
            font-size: 2.5rem;
        }
        
        .cta-button {
            padding: 1rem 1.5rem;
            font-size: 0.9rem;
        }
    }
</style>

<!-- JavaScript para animaciones mejoradas -->
<script>
    // Reveal animations mejoradas con Intersection Observer
    document.addEventListener('DOMContentLoaded', function() {
        const revealElements = document.querySelectorAll('.reveal');
        
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    // Optional: stop observing after reveal
                    revealObserver.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        });
        
        revealElements.forEach(element => {
            revealObserver.observe(element);
        });
    });
    
    // Counter animation para estad√≠sticas
    document.addEventListener('DOMContentLoaded', function() {
        const statNumbers = document.querySelectorAll('.stat-number');
        
        const animateCounter = (element) => {
            const target = element.textContent;
            const isNumber = /^\d+$/.test(target);
            
            if (!isNumber) return;
            
            const duration = 2000;
            const start = 0;
            const end = parseInt(target);
            const increment = end / (duration / 16);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= end) {
                    element.textContent = target;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current) + '+';
                }
            }, 16);
        };
        
        const counterObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounter(entry.target);
                    counterObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });
        
        statNumbers.forEach(stat => {
            counterObserver.observe(stat);
        });
    });
</script>



<!-- PARTE 3: GALER√çA OPTIMIZADA CON LAZY LOADING Y LIGHTBOX -->
<!-- Esto se inserta despu√©s de la secci√≥n ritual -->

<!-- Gallery Section Optimizada -->
<section class="gallery section" id="gallery">
    <div class="container">
        <h2 class="section-title reveal">SANTUARIO VISUAL</h2>
        <p class="section-description" style="text-align: center; color: var(--text-secondary); max-width: 700px; margin: 0 auto 3rem;">
            Sum√©rgete en la atm√≥sfera √∫nica de VALHALLA. Cada imagen captura la esencia de nuestro sanctum m√≠stico.
        </p>
        
        <div class="gallery-grid" role="list" aria-label="Galer√≠a de im√°genes de VALHALLA">
            <!-- Gallery Item 1 -->
            <figure class="gallery-item reveal" role="listitem">
                <picture>
                    <source 
                        data-srcset="1.jpg" 
                        type="image/webp">
                    <source 
                        data-srcset="1.jpg" 
                        type="image/avif">
                    <img 
                        data-src="1.jpg" 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Crect fill='%230a0a0a'/%3E%3C/svg%3E"
                        alt="Interior del bar VALHALLA con iluminaci√≥n dorada y ambiente m√≠stico"
                        class="gallery-image lazy"
                        loading="lazy"
                        width="300"
                        height="300">
                </picture>
                <div class="gallery-overlay">
                    <button 
                        class="gallery-expand" 
                        aria-label="Ampliar imagen del interior del bar"
                        data-index="0">
                        <i class="fas fa-search-plus" aria-hidden="true"></i>
                    </button>
                </div>
                <figcaption class="sr-only">Vista panor√°mica del interior de VALHALLA</figcaption>
            </figure>
            
            <!-- Gallery Item 2 -->
            <figure class="gallery-item reveal" role="listitem">
                <picture>
                    <source 
                        data-srcset="2.jpg" 
                        type="image/webp">
                    <source 
                        data-srcset="2.jpg" 
                        type="image/avif">
                    <img 
                        data-src="2.jpg" 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Crect fill='%230a0a0a'/%3E%3C/svg%3E"
                        alt="C√≥cteles signature servidos en cristaler√≠a premium con decoraci√≥n artesanal"
                        class="gallery-image lazy"
                        loading="lazy"
                        width="300"
                        height="300">
                </picture>
                <div class="gallery-overlay">
                    <button 
                        class="gallery-expand" 
                        aria-label="Ampliar imagen de c√≥cteles signature"
                        data-index="1">
                        <i class="fas fa-search-plus" aria-hidden="true"></i>
                    </button>
                </div>
                <figcaption class="sr-only">Colecci√≥n de c√≥cteles signature VALHALLA</figcaption>
            </figure>
            
            <!-- Gallery Item 3 -->
            <figure class="gallery-item reveal" role="listitem">
                <picture>
                    <source 
                        data-srcset="3.jpg" 
                        type="image/webp">
                    <source 
                        data-srcset="3.jpg" 
                        type="image/avif">
                    <img 
                        data-src="3.jpg" 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Crect fill='%230a0a0a'/%3E%3C/svg%3E"
                        alt="Barra principal con bartender preparando c√≥ctel con t√©cnica molecular"
                        class="gallery-image lazy"
                        loading="lazy"
                        width="300"
                        height="300">
                </picture>
                <div class="gallery-overlay">
                    <button 
                        class="gallery-expand" 
                        aria-label="Ampliar imagen de la barra principal"
                        data-index="2">
                        <i class="fas fa-search-plus" aria-hidden="true"></i>
                    </button>
                </div>
                <figcaption class="sr-only">Bartender en acci√≥n en la barra principal</figcaption>
            </figure>
            
            <!-- Gallery Item 4 -->
            <figure class="gallery-item reveal" role="listitem">
                <picture>
                    <source 
                        data-srcset="4.jpg" 
                        type="image/webp">
                    <source 
                        data-srcset="4.jpg" 
                        type="image/avif">
                    <img 
                        data-src="4.jpg" 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Crect fill='%230a0a0a'/%3E%3C/svg%3E"
                        alt="√Årea VIP con mobiliario de lujo y iluminaci√≥n ambiental personalizada"
                        class="gallery-image lazy"
                        loading="lazy"
                        width="300"
                        height="300">
                </picture>
                <div class="gallery-overlay">
                    <button 
                        class="gallery-expand" 
                        aria-label="Ampliar imagen del √°rea VIP"
                        data-index="3">
                        <i class="fas fa-search-plus" aria-hidden="true"></i>
                    </button>
                </div>
                <figcaption class="sr-only">Zona VIP exclusiva de VALHALLA</figcaption>
            </figure>
            
            <!-- Gallery Item 5 -->
            <figure class="gallery-item reveal" role="listitem">
                <picture>
                    <source 
                        data-srcset="5.jpeg" 
                        type="image/webp">
                    <source 
                        data-srcset="5.jpeg" 
                        type="image/avif">
                    <img 
                        data-src="5.jpeg" 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Crect fill='%230a0a0a'/%3E%3C/svg%3E"
                        alt="Detalle de c√≥ctel con oro comestible y presentaci√≥n teatral con humo"
                        class="gallery-image lazy"
                        loading="lazy"
                        width="300"
                        height="300">
                </picture>
                <div class="gallery-overlay">
                    <button 
                        class="gallery-expand" 
                        aria-label="Ampliar imagen de c√≥ctel con presentaci√≥n teatral"
                        data-index="4">
                        <i class="fas fa-search-plus" aria-hidden="true"></i>
                    </button>
                </div>
                <figcaption class="sr-only">C√≥ctel premium con oro comestible y efectos visuales</figcaption>
            </figure>
            
            <!-- Gallery Item 6 -->
            <figure class="gallery-item reveal" role="listitem">
                <picture>
                    <source 
                        data-srcset="6.jpg" 
                        type="image/webp">
                    <source 
                        data-srcset="6.jpg" 
                        type="image/avif">
                    <img 
                        data-src="6.jpg" 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Crect fill='%230a0a0a'/%3E%3C/svg%3E"
                        alt="Estanter√≠a de licores premium con botellas exclusivas iluminadas"
                        class="gallery-image lazy"
                        loading="lazy"
                        width="300"
                        height="300">
                </picture>
                <div class="gallery-overlay">
                    <button 
                        class="gallery-expand" 
                        aria-label="Ampliar imagen de la cava de licores"
                        data-index="5">
                        <i class="fas fa-search-plus" aria-hidden="true"></i>
                    </button>
                </div>
                <figcaption class="sr-only">Colecci√≥n de licores premium en la cava iluminada</figcaption>
            </figure>
            
            <!-- Gallery Item 7 -->
            <figure class="gallery-item reveal" role="listitem">
                <picture>
                    <source 
                        data-srcset="7.jpg" 
                        type="image/webp">
                    <source 
                        data-srcset="7.jpg" 
                        type="image/avif">
                    <img 
                        data-src="7.jpg" 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Crect fill='%230a0a0a'/%3E%3C/svg%3E"
                        alt="Ambiente nocturno del sanctum con clientes disfrutando en mesas √≠ntimas"
                        class="gallery-image lazy"
                        loading="lazy"
                        width="300"
                        height="300">
                </picture>
                <div class="gallery-overlay">
                    <button 
                        class="gallery-expand" 
                        aria-label="Ampliar imagen del ambiente nocturno"
                        data-index="6">
                        <i class="fas fa-search-plus" aria-hidden="true"></i>
                    </button>
                </div>
                <figcaption class="sr-only">Experiencia nocturna en el sanctum de VALHALLA</figcaption>
            </figure>
            
            <!-- Gallery Item 8 -->
            <figure class="gallery-item reveal" role="listitem">
                <picture>
                    <source 
                        data-srcset="8.jpg" 
                        type="image/webp">
                    <source 
                        data-srcset="8.jpg" 
                        type="image/avif">
                    <img 
                        data-src="8.jpg" 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Crect fill='%230a0a0a'/%3E%3C/svg%3E"
                        alt="Herramientas de mixolog√≠a profesional y t√©cnicas de preparaci√≥n artesanal"
                        class="gallery-image lazy"
                        loading="lazy"
                        width="300"
                        height="300">
                </picture>
                <div class="gallery-overlay">
                    <button 
                        class="gallery-expand" 
                        aria-label="Ampliar imagen de herramientas de mixolog√≠a"
                        data-index="7">
                        <i class="fas fa-search-plus" aria-hidden="true"></i>
                    </button>
                </div>
                <figcaption class="sr-only">Herramientas profesionales de mixolog√≠a</figcaption>
            </figure>
        </div>
    </div>
</section>

<!-- Lightbox Modal -->
<div 
    id="lightbox" 
    class="lightbox" 
    role="dialog" 
    aria-modal="true" 
    aria-labelledby="lightbox-title"
    aria-hidden="true"
    style="display: none;">
    
    <div class="lightbox-backdrop" aria-hidden="true"></div>
    
    <div class="lightbox-container">
        <button 
            class="lightbox-close" 
            aria-label="Cerrar galer√≠a"
            title="Cerrar (Esc)">
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
        
        <button 
            class="lightbox-prev" 
            aria-label="Imagen anterior"
            title="Anterior (‚Üê)">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </button>
        
        <button 
            class="lightbox-next" 
            aria-label="Imagen siguiente"
            title="Siguiente (‚Üí)">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </button>
        
        <div class="lightbox-content">
            <img 
                id="lightbox-image" 
                src="" 
                alt="" 
                class="lightbox-img">
            <div class="lightbox-caption" id="lightbox-title"></div>
            <div class="lightbox-counter" aria-live="polite"></div>
        </div>
        
        <!-- Loading spinner -->
        <div class="lightbox-loader" aria-label="Cargando imagen">
            <div class="spinner"></div>
        </div>
    </div>
</div>

<!-- CSS PARA GALER√çA Y LIGHTBOX -->
<style>
    /* ========== GALLERY STYLES ========== */
    .gallery {
        background: var(--obsidian);
        padding: 8rem 4rem;
        position: relative;
        overflow: hidden;
    }
    
    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
        margin-top: 4rem;
    }
    
    .gallery-item {
        position: relative;
        height: 350px;
        background: var(--shadow);
        overflow: hidden;
        transition: all 0.5s ease;
        border: 1px solid var(--smoke);
        border-radius: 8px;
        cursor: pointer;
        margin: 0;
    }
    
    /* Lazy loading placeholder */
    .gallery-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease, filter 0.3s ease;
        background: var(--shadow);
    }
    
    .gallery-image.lazy {
        filter: blur(10px);
        transform: scale(1.1);
    }
    
    .gallery-image.loaded {
        filter: blur(0);
        transform: scale(1);
    }
    
    .gallery-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--gold-accent), transparent);
        transform: translateX(-100%);
        transition: transform 0.5s ease;
        z-index: 2;
    }
    
    .gallery-item:hover::before {
        transform: translateX(100%);
    }
    
    .gallery-item:hover {
        transform: translateY(-10px);
        border-color: var(--gold-accent);
        box-shadow: 0 10px 40px rgba(212, 175, 55, 0.2);
    }
    
    .gallery-item:hover .gallery-image {
        transform: scale(1.1);
    }
    
    .gallery-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(0,0,0,0.7), rgba(212,175,55,0.3));
        opacity: 0;
        transition: opacity 0.4s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
    }
    
    .gallery-item:hover .gallery-overlay {
        opacity: 1;
    }
    
    .gallery-expand {
        background: var(--gold-accent);
        color: var(--black-void);
        border: none;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        transform: scale(0);
    }
    
    .gallery-item:hover .gallery-expand {
        transform: scale(1);
    }
    
    .gallery-expand:hover {
        transform: scale(1.2) rotate(90deg);
        box-shadow: 0 0 30px rgba(212,175,55,0.6);
    }
    
    .gallery-expand:focus-visible {
        outline: 3px solid #fff;
        outline-offset: 3px;
    }
    
    /* ========== LIGHTBOX STYLES ========== */
    .lightbox {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10000;
        animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    .lightbox-backdrop {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
    }
    
    .lightbox-container {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
    }
    
    .lightbox-content {
        position: relative;
        max-width: 90vw;
        max-height: 85vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }
    
    .lightbox-img {
        max-width: 100%;
        max-height: 75vh;
        object-fit: contain;
        border: 2px solid var(--gold-accent);
        border-radius: 4px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.8);
    }
    
    .lightbox-caption {
        color: #fff;
        font-size: 1.1rem;
        text-align: center;
        max-width: 600px;
        line-height: 1.6;
        padding: 0 1rem;
    }
    
    .lightbox-counter {
        color: var(--gold-accent);
        font-size: 0.9rem;
        letter-spacing: 0.1rem;
        margin-top: 0.5rem;
    }
    
    /* Lightbox Controls */
    .lightbox-close,
    .lightbox-prev,
    .lightbox-next {
        position: absolute;
        background: rgba(212,175,55,0.2);
        border: 2px solid var(--gold-accent);
        color: var(--gold-accent);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
    }
    
    .lightbox-close {
        top: 2rem;
        right: 2rem;
    }
    
    .lightbox-prev {
        left: 2rem;
        top: 50%;
        transform: translateY(-50%);
    }
    
    .lightbox-next {
        right: 2rem;
        top: 50%;
        transform: translateY(-50%);
    }
    
    .lightbox-close:hover,
    .lightbox-prev:hover,
    .lightbox-next:hover {
        background: var(--gold-accent);
        color: var(--black-void);
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 0 30px rgba(212,175,55,0.6);
    }
    
    .lightbox-close:hover {
        transform: scale(1.1) rotate(90deg);
    }
    
    .lightbox-close:focus-visible,
    .lightbox-prev:focus-visible,
    .lightbox-next:focus-visible {
        outline: 3px solid #fff;
        outline-offset: 3px;
    }
    
    /* Loading Spinner */
    .lightbox-loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: none;
    }
    
    .lightbox-loader.active {
        display: block;
    }
    
    .spinner {
        width: 60px;
        height: 60px;
        border: 4px solid rgba(212,175,55,0.2);
        border-top-color: var(--gold-accent);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    
    /* ========== RESPONSIVE ========== */
    @media (max-width: 1024px) {
        .gallery-grid {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .gallery-item {
            height: 300px;
        }
    }
    
    @media (max-width: 768px) {
        .gallery {
            padding: 6rem 2rem;
        }
        
        .gallery-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        .gallery-item {
            height: 250px;
        }
        
        .lightbox-prev,
        .lightbox-next {
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
        }
        
        .lightbox-prev {
            left: 1rem;
        }
        
        .lightbox-next {
            right: 1rem;
        }
        
        .lightbox-close {
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
        }
        
        .lightbox-caption {
            font-size: 0.95rem;
        }
    }
    
    @media (max-width: 480px) {
        .gallery-grid {
            grid-template-columns: 1fr;
        }
        
        .gallery-item {
            height: 280px;
        }
        
        .lightbox-container {
            padding: 1rem;
        }
        
        .lightbox-img {
            max-height: 60vh;
        }
    }
    
    /* Prefers reduced motion */
    @media (prefers-reduced-motion: reduce) {
        .gallery-item,
        .gallery-image,
        .gallery-overlay,
        .gallery-expand {
            transition: none;
        }
        
        .lightbox {
            animation: none;
        }
    }
</style>

<!-- JAVASCRIPT PARA LAZY LOADING Y LIGHTBOX -->
<script>
(function() {
    'use strict';
    
    // ========== LAZY LOADING ==========
    const lazyImages = document.querySelectorAll('.gallery-image.lazy');
    
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                const picture = img.parentElement;
                
                // Load sources
                if (picture.tagName === 'PICTURE') {
                    const sources = picture.querySelectorAll('source');
                    sources.forEach(source => {
                        if (source.dataset.srcset) {
                            source.srcset = source.dataset.srcset;
                        }
                    });
                }
                
                // Load image
                if (img.dataset.src) {
                    img.src = img.dataset.src;
                    img.addEventListener('load', () => {
                        img.classList.remove('lazy');
                        img.classList.add('loaded');
                    });
                }
                
                observer.unobserve(img);
            }
        });
    }, {
        rootMargin: '50px'
    });
    
    lazyImages.forEach(img => imageObserver.observe(img));
    
    // ========== LIGHTBOX ==========
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-image');
    const lightboxCaption = document.getElementById('lightbox-title');
    const lightboxCounter = document.querySelector('.lightbox-counter');
    const lightboxLoader = document.querySelector('.lightbox-loader');
    const expandButtons = document.querySelectorAll('.gallery-expand');
    const closeButton = document.querySelector('.lightbox-close');
    const prevButton = document.querySelector('.lightbox-prev');
    const nextButton = document.querySelector('.lightbox-next');
    
    let currentIndex = 0;
    const galleryImages = Array.from(document.querySelectorAll('.gallery-image'));
    
    // Open lightbox
    function openLightbox(index) {
        currentIndex = index;
        loadImage(currentIndex);
        lightbox.style.display = 'block';
        lightbox.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
        
        // Focus trap
        closeButton.focus();
    }
    
    // Close lightbox
    function closeLightbox() {
        lightbox.style.display = 'none';
        lightbox.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
    }
    
    // Load image
    function loadImage(index) {
        const img = galleryImages[index];
        const alt = img.getAttribute('alt');
        const src = img.dataset.src || img.src;
        
        lightboxLoader.classList.add('active');
        lightboxImg.style.opacity = '0';
        
        const tempImg = new Image();
        tempImg.onload = function() {
            lightboxImg.src = src;
            lightboxImg.alt = alt;
            lightboxCaption.textContent = alt;
            lightboxCounter.textContent = `${index + 1} / ${galleryImages.length}`;
            
            lightboxLoader.classList.remove('active');
            lightboxImg.style.opacity = '1';
        };
        tempImg.src = src;
    }
    
    // Navigate
    function showNext() {
        currentIndex = (currentIndex + 1) % galleryImages.length;
        loadImage(currentIndex);
    }
    
    function showPrev() {
        currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
        loadImage(currentIndex);
    }
    
    // Event listeners
    expandButtons.forEach((btn, index) => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            openLightbox(index);
        });
    });
    
    closeButton.addEventListener('click', closeLightbox);
    prevButton.addEventListener('click', showPrev);
    nextButton.addEventListener('click', showNext);
    
    // Click outside to close
    lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox || e.target.classList.contains('lightbox-backdrop')) {
            closeLightbox();
        }
    });
    
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (lightbox.style.display === 'block') {
            switch(e.key) {
                case 'Escape':
                    closeLightbox();
                    break;
                case 'ArrowLeft':
                    showPrev();
                    break;
                case 'ArrowRight':
                    showNext();
                    break;
            }
        }
    });
    
    // Touch swipe support
    let touchStartX = 0;
    let touchEndX = 0;
    
    lightbox.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
    });
    
    lightbox.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    });
    
    function handleSwipe() {
        const swipeThreshold = 50;
        if (touchEndX < touchStartX - swipeThreshold) {
            showNext();
        }
        if (touchEndX > touchStartX + swipeThreshold) {
            showPrev();
        }
    }
    
})();
</script>



<!-- PARTE 4: FORMULARIO DE RESERVAS MEJORADO CON SEGURIDAD -->
<!-- Esto se inserta despu√©s de la secci√≥n gallery -->

<!-- Reservation Section Optimizada -->
<section class="reservation" id="reservation">
    <div class="reservation-card" role="region" aria-labelledby="res-title">
        
        <!-- FORM con validaci√≥n mejorada -->
        <form 
            id="reservationForm" 
            class="reservation-form" 
            autocomplete="on" 
            aria-describedby="res-desc"
            novalidate>
            
            <!-- Honeypot anti-spam (campo invisible) -->
            <input 
                type="text" 
                name="website" 
                id="website" 
                class="honeypot" 
                tabindex="-1" 
                autocomplete="off"
                aria-hidden="true">
            
            <!-- Nombre completo -->
            <div class="form-group">
                <label class="floating" for="name">
                    NOMBRE COMPLETO <span class="required" aria-label="requerido">*</span>
                </label>
                <input 
                    id="name" 
                    name="name" 
                    type="text" 
                    required 
                    placeholder="Ej. Alejandra Ruiz"
                    minlength="3"
                    maxlength="100"
                    autocomplete="name"
                    aria-required="true"
                    aria-invalid="false"
                    aria-describedby="name-error">
                <span class="error-message" id="name-error" role="alert"></span>
            </div>

            <div class="row">
                <!-- Email -->
                <div class="col form-group">
                    <label class="floating" for="email">
                        CORREO ELECTR√ìNICO <span class="required">*</span>
                    </label>
                    <input 
                        id="email" 
                        name="email" 
                        type="email" 
                        required 
                        placeholder="tu@correo.com"
                        autocomplete="email"
                        aria-required="true"
                        aria-invalid="false"
                        aria-describedby="email-error">
                    <span class="error-message" id="email-error" role="alert"></span>
                </div>
                
                <!-- Tel√©fono -->
                <div class="col form-group">
                    <label class="floating" for="phone">
                        TEL√âFONO <span class="required">*</span>
                    </label>
                    <input 
                        id="phone" 
                        name="phone" 
                        type="tel" 
                        required
                        inputmode="tel" 
                        placeholder="+52 55 1234 5678"
                        pattern="[0-9+\s\-()]+"
                        autocomplete="tel"
                        aria-required="true"
                        aria-invalid="false"
                        aria-describedby="phone-error">
                    <span class="error-message" id="phone-error" role="alert"></span>
                </div>
            </div>

            <div class="row">
                <!-- Fecha -->
                <div class="col form-group">
                    <label class="floating" for="date">
                        FECHA <span class="required">*</span>
                    </label>
                    <input 
                        id="date" 
                        name="date" 
                        type="date" 
                        required
                        aria-required="true"
                        aria-invalid="false"
                        aria-describedby="date-error">
                    <span class="error-message" id="date-error" role="alert"></span>
                </div>
                
                <!-- Hora -->
                <div class="col form-group">
                    <label class="floating" for="time">
                        HORA <span class="required">*</span>
                    </label>
                    <select 
                        id="time" 
                        name="time" 
                        required
                        aria-required="true"
                        aria-invalid="false"
                        aria-describedby="time-error">
                        <option value="">Seleccionar hora</option>
                        <option value="20:00">20:00 - Apertura</option>
                        <option value="21:00">21:00 - Primera</option>
                        <option value="22:00">22:00 - Hora Dorada</option>
                        <option value="23:00">23:00 - Medianoche</option>
                        <option value="00:00">00:00 - M√≠stica</option>
                    </select>
                    <span class="error-message" id="time-error" role="alert"></span>
                </div>
            </div>

            <!-- N√∫mero de invitados -->
            <div class="form-group">
                <label class="floating" for="guests">
                    N√öMERO DE INVITADOS <span class="required">*</span>
                </label>
                <select 
                    id="guests" 
                    name="guests" 
                    required
                    aria-required="true"
                    aria-invalid="false"
                    aria-describedby="guests-error">
                    <option value="">Seleccionar</option>
                    <option value="1">1 persona</option>
                    <option value="2">2 personas</option>
                    <option value="3-4">3-4 personas</option>
                    <option value="5-6">5-6 personas</option>
                    <option value="7+">7+ personas (grupo)</option>
                </select>
                <span class="error-message" id="guests-error" role="alert"></span>
            </div>

            <!-- Peticiones especiales -->
            <div class="form-group">
                <label class="floating" for="message">
                    PETICIONES ESPECIALES
                    <span style="font-weight: 400; font-size: 0.85em;">(Opcional)</span>
                </label>
                <textarea 
                    id="message" 
                    name="message" 
                    placeholder="Alergias, celebraciones, necesidades especiales..."
                    maxlength="500"
                    aria-describedby="message-counter"></textarea>
                <div class="char-counter" id="message-counter" aria-live="polite">
                    <span id="char-count">0</span>/500 caracteres
                </div>
            </div>

            <!-- Privacy Policy Checkbox -->
            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    <input 
                        type="checkbox" 
                        id="privacy" 
                        name="privacy" 
                        required
                        aria-required="true"
                        aria-describedby="privacy-error">
                    <span class="checkbox-custom"></span>
                    <span class="checkbox-text">
                        Acepto la <a href="#privacy-policy" class="link-gold">pol√≠tica de privacidad</a> 
                        y el tratamiento de mis datos personales <span class="required">*</span>
                    </span>
                </label>
                <span class="error-message" id="privacy-error" role="alert"></span>
            </div>

            <!-- Submit row -->
            <div class="submit-row">
                <button 
                    type="submit" 
                    class="btn primary" 
                    id="submitBtn"
                    aria-label="Confirmar reserva">
                    <i class="fas fa-magic" aria-hidden="true"></i>
                    <span>CONFIRMAR RITUAL</span>
                </button>

                <button 
                    type="button" 
                    class="btn ghost small" 
                    id="previewBtn" 
                    title="Ver resumen de tu reserva">
                    <i class="fas fa-eye" aria-hidden="true"></i>
                    VER RESUMEN
                </button>
            </div>

            <!-- Rate limiting indicator -->
            <div class="rate-limit-message" id="rateLimitMessage" style="display: none;" role="alert"></div>
        </form>

        <!-- INFO LATERAL -->
        <aside class="reservation-info" aria-label="Informaci√≥n sobre reservas">
            <h3 id="res-title">RESERVA TU EXPERIENCIA</h3>
            <p id="res-desc">
                El sanctum abre sus puertas en la noche. Completa tus datos y recibir√°s una confirmaci√≥n autom√°tica 
                en el correo que indiques. Para asegurar tu lugar, revisa tu bandeja de entrada y spam.
            </p>
            
            <div class="info-highlights">
                <div class="info-item">
                    <i class="fas fa-clock" aria-hidden="true"></i>
                    <div>
                        <strong>Horario</strong>
                        <p>Martes a S√°bado, 20:00 - 02:00</p>
                    </div>
                </div>
                
                <div class="info-item">
                    <i class="fas fa-users" aria-hidden="true"></i>
                    <div>
                        <strong>Capacidad</strong>
                        <p>Reserva con 24h de anticipaci√≥n</p>
                    </div>
                </div>
                
                <div class="info-item">
                    <i class="fas fa-shield-alt" aria-hidden="true"></i>
                    <div>
                        <strong>Seguro</strong>
                        <p>Tus datos est√°n protegidos</p>
                    </div>
                </div>
            </div>
            
            <p class="note">
                <strong>Nota:</strong> Si no recibes confirmaci√≥n en 5 minutos, verifica tu carpeta de spam 
                o cont√°ctanos a <a href="mailto:contacto@valhalla.com" class="link-gold">contacto@valhalla.com</a>
            </p>
        </aside>
    </div>
</section>

<!-- Success Modal -->
<div id="successModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="success-title">
    <div class="modal-content success-modal">
        <div class="modal-icon success">
            <i class="fas fa-check-circle" aria-hidden="true"></i>
        </div>
        <h3 id="success-title">‚ú® RITUAL CONFIRMADO ‚ú®</h3>
        <div id="successMessage"></div>
        <button class="btn primary" id="closeSuccessModal" aria-label="Cerrar mensaje de confirmaci√≥n">
            <i class="fas fa-check" aria-hidden="true"></i>
            ENTENDIDO
        </button>
    </div>
</div>

<!-- Preview Modal -->
<div id="previewModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="preview-title">
    <div class="modal-content preview-modal">
        <button class="modal-close" id="closePreviewModal" aria-label="Cerrar vista previa">
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
        <h3 id="preview-title">üìã Resumen de tu Reserva</h3>
        <div id="previewContent"></div>
        <div class="modal-actions">
            <button class="btn primary" id="confirmFromPreview">
                <i class="fas fa-paper-plane" aria-hidden="true"></i>
                CONFIRMAR AHORA
            </button>
            <button class="btn ghost" id="editFromPreview">
                <i class="fas fa-edit" aria-hidden="true"></i>
                EDITAR
            </button>
        </div>
    </div>
</div>

<!-- Toast container -->
<div id="toastContainer" aria-live="polite" aria-atomic="true"></div>

<!-- CSS PARA FORMULARIO Y MODALES -->
<style>
    /* ========== RESERVATION SECTION ========== */
    .reservation {
        padding: 6rem 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--obsidian);
    }

    .reservation-card {
        width: 100%;
        max-width: 1100px;
        display: grid;
        grid-template-columns: 1fr 420px;
        gap: 2.4rem;
        background: linear-gradient(180deg, rgba(212,175,55,0.03), rgba(0,0,0,0.25));
        border: 1px solid rgba(212,175,55,0.08);
        padding: 2.4rem;
        border-radius: var(--radius);
        box-shadow: var(--goldShadow);
        backdrop-filter: blur(6px) saturate(120%);
    }

    /* ========== FORM STYLES ========== */
    .reservation-form {
        background: linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.06));
        padding: 1.2rem;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        gap: 1.2rem;
    }

    .form-group {
        position: relative;
    }

    .row {
        display: flex;
        gap: 1rem;
    }

    .row .col {
        flex: 1;
    }

    label.floating {
        display: block;
        font-size: 0.77rem;
        color: var(--accent);
        margin-bottom: 0.35rem;
        letter-spacing: 0.08rem;
        font-weight: 600;
    }

    .required {
        color: #ff6b6b;
    }

    input, textarea, select {
        width: 100%;
        padding: 0.9rem 1rem;
        font-size: 0.95rem;
        color: #fff;
        background: var(--glass);
        border: 1px solid rgba(255,255,255,0.06);
        border-radius: 12px;
        outline: none;
        transition: all 0.2s ease;
        font-family: inherit;
    }

    input:focus, textarea:focus, select:focus {
        box-shadow: 0 6px 30px rgba(212,175,55,0.08);
        border-color: var(--accent);
        transform: translateY(-2px);
    }

    input:focus-visible, textarea:focus-visible, select:focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
    }

    /* Error states */
    input.error, textarea.error, select.error {
        border-color: #ff6b6b;
        background: rgba(255,107,107,0.05);
    }

    input.success, select.success {
        border-color: #51cf66;
    }

    .error-message {
        display: block;
        color: #ff6b6b;
        font-size: 0.8rem;
        margin-top: 0.3rem;
        min-height: 1rem;
        opacity: 0;
        transform: translateY(-5px);
        transition: all 0.2s ease;
    }

    .error-message.show {
        opacity: 1;
        transform: translateY(0);
    }

    /* Honeypot (anti-spam) */
    .honeypot {
        position: absolute;
        left: -9999px;
        width: 1px;
        height: 1px;
        opacity: 0;
    }

    /* Character counter */
    .char-counter {
        text-align: right;
        font-size: 0.8rem;
        color: var(--text-muted);
        margin-top: 0.3rem;
    }

    #char-count {
        color: var(--accent);
        font-weight: 600;
    }

    /* Checkbox custom */
    .checkbox-group {
        margin-top: 0.5rem;
    }

    .checkbox-label {
        display: flex;
        align-items: flex-start;
        gap: 0.8rem;
        cursor: pointer;
        user-select: none;
    }

    .checkbox-label input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        width: 0;
        height: 0;
    }

    .checkbox-custom {
        position: relative;
        width: 22px;
        height: 22px;
        min-width: 22px;
        border: 2px solid rgba(212,175,55,0.3);
        border-radius: 4px;
        background: var(--glass);
        transition: all 0.2s ease;
    }

    .checkbox-label input:checked + .checkbox-custom {
        background: var(--accent);
        border-color: var(--accent);
    }

    .checkbox-label input:checked + .checkbox-custom::after {
        content: '‚úì';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--black-void);
        font-weight: bold;
        font-size: 14px;
    }

    .checkbox-label input:focus-visible + .checkbox-custom {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
    }

    .checkbox-text {
        flex: 1;
        font-size: 0.88rem;
        color: var(--text-secondary);
        line-height: 1.5;
    }

    .link-gold {
        color: var(--accent);
        text-decoration: underline;
        transition: color 0.2s ease;
    }

    .link-gold:hover {
        color: #FFD700;
    }

    textarea {
        min-height: 120px;
        resize: vertical;
    }

    /* Submit row */
    .submit-row {
        display: flex;
        gap: 1rem;
        align-items: center;
        margin-top: 0.4rem;
    }

    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.6rem;
        padding: 0.95rem 1.2rem;
        border-radius: 12px;
        border: 1px solid rgba(212,175,55,0.15);
        background: linear-gradient(90deg, rgba(212,175,55,0.06), rgba(212,175,55,0.02));
        color: var(--accent);
        cursor: pointer;
        font-weight: 700;
        letter-spacing: 0.06rem;
        transition: all 0.12s ease;
        font-family: inherit;
        font-size: 0.9rem;
    }

    .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
    }

    .btn:not(:disabled):active {
        transform: translateY(1px);
    }

    .btn.primary {
        background: linear-gradient(90deg, rgba(212,175,55,0.20), rgba(212,175,55,0.12));
        border: 1px solid rgba(212,175,55,0.35);
        color: var(--accent);
        box-shadow: 0 10px 30px rgba(212,175,55,0.12);
        flex: 1;
    }

    .btn.primary:not(:disabled):hover {
        background: var(--accent);
        color: var(--black-void);
        box-shadow: 0 10px 40px rgba(212,175,55,0.25);
        transform: translateY(-2px);
    }

    .btn.ghost {
        background: transparent;
        color: var(--text-secondary);
        border: 1px solid rgba(255,255,255,0.08);
    }

    .btn.ghost:hover {
        border-color: var(--accent);
        color: var(--accent);
    }

    .btn.small {
        font-size: 0.85rem;
        padding: 0.7rem 1rem;
    }

    /* Rate limit message */
    .rate-limit-message {
        padding: 0.8rem;
        background: rgba(255,107,107,0.1);
        border: 1px solid rgba(255,107,107,0.3);
        border-radius: 8px;
        color: #ff6b6b;
        font-size: 0.85rem;
        text-align: center;
    }

    /* ========== INFO LATERAL ========== */
    .reservation-info {
        padding: 1.6rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 1.2rem;
        border-radius: 12px;
        background: linear-gradient(180deg, rgba(212,175,55,0.02), transparent);
    }

    .reservation-info h3 {
        font-family: 'Playfair Display', serif;
        font-weight: 300;
        color: var(--accent);
        letter-spacing: 0.08rem;
        margin: 0;
        font-size: 1.6rem;
    }

    .reservation-info p {
        color: var(--text-secondary);
        margin: 0;
        line-height: 1.6;
        font-size: 0.95rem;
    }

    .info-highlights {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin: 1rem 0;
    }

    .info-item {
        display: flex;
        gap: 1rem;
        align-items: flex-start;
        padding: 0.8rem;
        background: rgba(212,175,55,0.04);
        border-radius: 8px;
        border: 1px solid rgba(212,175,55,0.08);
    }

    .info-item i {
        color: var(--accent);
        font-size: 1.3rem;
        margin-top: 0.2rem;
    }

    .info-item strong {
        color: var(--accent);
        display: block;
        margin-bottom: 0.2rem;
        font-size: 0.9rem;
    }

    .info-item p {
        font-size: 0.85rem;
        margin: 0;
    }

    .note {
        margin-top: 1rem;
        font-size: 0.88rem;
        color: #cfc3a2;
        background: rgba(212,175,55,0.05);
        padding: 1rem;
        border-radius: 8px;
        border-left: 3px solid var(--accent);
    }

    /* ========== MODALS ========== */
    .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.85);
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        padding: 2rem;
        animation: fadeIn 0.3s ease;
    }

    .modal-content {
        background: linear-gradient(180deg, #0f0f0f, #0a0a0a);
        border-radius: 14px;
        padding: 2.5rem;
        max-width: 600px;
        width: 100%;
        border: 1px solid rgba(212,175,55,0.12);
        box-shadow: 0 20px 60px rgba(0,0,0,0.8);
        position: relative;
        animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: transparent;
        border: none;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s ease;
    }

    .modal-close:hover {
        background: rgba(255,255,255,0.1);
        color: var(--accent);
        transform: rotate(90deg);
    }

    .modal-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
        text-align: center;
    }

    .modal-icon.success {
        color: #51cf66;
    }

    .modal-content h3 {
        color: var(--accent);
        text-align: center;
        margin-bottom: 1.5rem;
        font-size: 1.8rem;
        letter-spacing: 0.1rem;
    }

    .modal-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }

    .modal-actions .btn {
        flex: 1;
    }

    #previewContent {
        background: rgba(212,175,55,0.03);
        padding: 1.5rem;
        border-radius: 8px;
        border: 1px solid rgba(212,175,55,0.1);
    }

    #previewContent p {
        margin: 0.8rem 0;
        color: var(--text-secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        border-bottom: 1px solid rgba(255,255,255,0.05);
    }

    #previewContent p:last-child {
        border-bottom: none;
    }

    #previewContent strong {
        color: var(--accent);
        min-width: 140px;
    }

    #successMessage {
        text-align: center;
        color: var(--text-secondary);
        line-height: 1.8;
        margin: 1rem 0 2rem;
    }

    #successMessage strong {
        color: var(--accent);
    }

    /* ========== TOAST ========== */
    #toastContainer {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        z-index: 10001;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 400px;
    }

    .toast {
        background: #0f0f0f;
        border: 1px solid rgba(212,175,55,0.15);
        padding: 1rem 1.2rem;
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.6);
        color: #ddd;
        display: flex;
        gap: 0.8rem;
        align-items: center;
        animation: slideInRight 0.3s ease;
    }

    @keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(100px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .toast.success {
        border-color: rgba(81,207,102,0.3);
        background: linear-gradient(135deg, rgba(81,207,102,0.08), rgba(81,207,102,0.02));
    }

    .toast.success i {
        color: #51cf66;
    }

    .toast.error {
        border-color: rgba(255,107,107,0.3);
        background: linear-gradient(135deg, rgba(255,107,107,0.08), rgba(255,107,107,0.02));
    }

    .toast.error i {
        color: #ff6b6b;
    }

    .toast.info i {
        color: var(--accent);
    }

    .toast i {
        font-size: 1.3rem;
    }

    .toast-message {
        flex: 1;
        font-size: 0.9rem;
        line-height: 1.4;
    }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 980px) {
        .reservation-card {
            grid-template-columns: 1fr;
            padding: 1.8rem;
        }

        .reservation-info {
            order: -1;
        }
    }

    @media (max-width: 560px) {
        .reservation {
            padding: 4rem 1rem;
        }

        .row {
            flex-direction: column;
        }

        .submit-row {
            flex-direction: column;
        }

        .btn {
            width: 100%;
        }

        .modal-content {
            padding: 1.5rem;
        }

        .modal-actions {
            flex-direction: column;
        }

        #toastContainer {
            right: 1rem;
            left: 1rem;
            bottom: 1rem;
        }
    }
</style>

<!-- JAVASCRIPT COMPLETO DEL FORMULARIO -->
<script>
(function() {
    'use strict';

    // ========== CONFIGURACI√ìN EMAILJS ==========
    const EMAILJS_CONFIG = {
        SERVICE_ID: 'service_yjz213e',
        TEMPLATE_CLIENT_ID: 'template_6wk6eri',
        PUBLIC_KEY: '1aZ0HEuAPOzpXqd8B',
        ADMIN_EMAIL: 'contacto@valhalla.com'
    };

    // Inicializar EmailJS
    try {
        emailjs.init(EMAILJS_CONFIG.PUBLIC_KEY);
        console.info('EmailJS inicializado correctamente');
    } catch (err) {
        console.error('Error al inicializar EmailJS:', err);
    }

    // ========== ELEMENTOS DEL DOM ==========
    const form = document.getElementById('reservationForm');
    const submitBtn = document.getElementById('submitBtn');
    const previewBtn = document.getElementById('previewBtn');
    const successModal = document.getElementById('successModal');
    const previewModal = document.getElementById('previewModal');
    const toastContainer = document.getElementById('toastContainer');
    const rateLimitMessage = document.getElementById('rateLimitMessage');

    // Campos del formulario
    const fields = {
        name: document.getElementById('name'),
        email: document.getElementById('email'),
        phone: document.getElementById('phone'),
        date: document.getElementById('date'),
        time: document.getElementById('time'),
        guests: document.getElementById('guests'),
        message: document.getElementById('message'),
        privacy: document.getElementById('privacy'),
        honeypot: document.getElementById('website')
    };

    // ========== RATE LIMITING ==========
    const RATE_LIMIT = {
        maxAttempts: 3,
        timeWindow: 3600000, // 1 hora en ms
        storageKey: 'valhalla_reservations'
    };

    function checkRateLimit() {
        const stored = localStorage.getItem(RATE_LIMIT.storageKey);
        if (!stored) return true;

        const data = JSON.parse(stored);
        const now = Date.now();
        
        // Limpiar intentos antiguos
        data.attempts = data.attempts.filter(time => now - time < RATE_LIMIT.timeWindow);
        
        if (data.attempts.length >= RATE_LIMIT.maxAttempts) {
            const oldestAttempt = Math.min(...data.attempts);
            const timeLeft = Math.ceil((RATE_LIMIT.timeWindow - (now - oldestAttempt)) / 60000);
            
            rateLimitMessage.textContent = `‚è±Ô∏è Has alcanzado el l√≠mite de intentos. Intenta nuevamente en ${timeLeft} minutos.`;
            rateLimitMessage.style.display = 'block';
            return false;
        }

        localStorage.setItem(RATE_LIMIT.storageKey, JSON.stringify(data));
        return true;
    }

    function addRateLimitAttempt() {
        const stored = localStorage.getItem(RATE_LIMIT.storageKey);
        const data = stored ? JSON.parse(stored) : { attempts: [] };
        data.attempts.push(Date.now());
        localStorage.setItem(RATE_LIMIT.storageKey, JSON.stringify(data));
    }

    // ========== VALIDACI√ìN ==========
    const validators = {
        name: (value) => {
            if (!value.trim()) return 'El nombre es requerido';
            if (value.trim().length < 3) return 'El nombre debe tener al menos 3 caracteres';
            if (value.trim().length > 100) return 'El nombre es demasiado largo';
            if (!/^[a-z√°√©√≠√≥√∫√±√º\s]+$/i.test(value)) return 'El nombre solo puede contener letras';
            return '';
        },

        email: (value) => {
            if (!value.trim()) return 'El correo electr√≥nico es requerido';
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(value)) return 'Ingresa un correo electr√≥nico v√°lido';
            return '';
        },

        phone: (value) => {
            if (!value.trim()) return 'El tel√©fono es requerido';
            const phoneRegex = /^[0-9+\s\-()]+$/;
            if (!phoneRegex.test(value)) return 'Ingresa un tel√©fono v√°lido';
            if (value.replace(/\D/g, '').length < 10) return 'El tel√©fono debe tener al menos 10 d√≠gitos';
            return '';
        },

        date: (value) => {
            if (!value) return 'La fecha es requerida';
            const selectedDate = new Date(value);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (selectedDate < today) return 'La fecha no puede ser anterior a hoy';
            
            const maxDate = new Date();
            maxDate.setMonth(maxDate.getMonth() + 3);
            if (selectedDate > maxDate) return 'Solo puedes reservar hasta 3 meses adelante';
            
            // Verificar d√≠a de la semana (no lunes ni domingos regulares)
            const dayOfWeek = selectedDate.getDay();
            if (dayOfWeek === 1) return 'No abrimos los lunes';
            
            return '';
        },

        time: (value) => {
            if (!value) return 'La hora es requerida';
            return '';
        },

        guests: (value) => {
            if (!value) return 'El n√∫mero de invitados es requerido';
            return '';
        },

        privacy: (checked) => {
            if (!checked) return 'Debes aceptar la pol√≠tica de privacidad';
            return '';
        }
    };

    function validateField(fieldName) {
        const field = fields[fieldName];
        if (!field) return;

        const value = field.type === 'checkbox' ? field.checked : field.value;
        const error = validators[fieldName] ? validators[fieldName](value) : '';
        const errorElement = document.getElementById(`${fieldName}-error`);

        if (error) {
            field.classList.add('error');
            field.classList.remove('success');
            field.setAttribute('aria-invalid', 'true');
            if (errorElement) {
                errorElement.textContent = error;
                errorElement.classList.add('show');
            }
            return false;
        } else {
            field.classList.remove('error');
            if (field.type !== 'checkbox') field.classList.add('success');
            field.setAttribute('aria-invalid', 'false');
            if (errorElement) {
                errorElement.textContent = '';
                errorElement.classList.remove('show');
            }
            return true;
        }
    }

    function validateForm() {
        let isValid = true;
        Object.keys(validators).forEach(fieldName => {
            if (!validateField(fieldName)) isValid = false;
        });
        return isValid;
    }

    // ========== CHARACTER COUNTER ==========
    const messageField = fields.message;
    const charCount = document.getElementById('char-count');
    
    if (messageField && charCount) {
        messageField.addEventListener('input', () => {
            const count = messageField.value.length;
            charCount.textContent = count;
            
            if (count > 450) {
                charCount.style.color = '#ff6b6b';
            } else if (count > 400) {
                charCount.style.color = '#ffa500';
            } else {
                charCount.style.color = 'var(--accent)';
            }
        });
    }

    // ========== EVENT LISTENERS ==========
    // Validaci√≥n en tiempo real
    Object.keys(fields).forEach(fieldName => {
        const field = fields[fieldName];
        if (field && validators[fieldName]) {
            field.addEventListener('blur', () => validateField(fieldName));
            field.addEventListener('input', () => {
                if (field.classList.contains('error')) {
                    validateField(fieldName);
                }
            });
        }
    });

    // Establecer fecha m√≠nima
    if (fields.date) {
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(tomorrow.getDate() + 1);
        const yyyy = tomorrow.getFullYear();
        const mm = String(tomorrow.getMonth() + 1).padStart(2, '0');
        const dd = String(tomorrow.getDate()).padStart(2, '0');
        fields.date.min = `${yyyy}-${mm}-${dd}`;
    }

    // ========== TOAST NOTIFICATIONS ==========
    function showToast(message, type = 'info', duration = 4000) {
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        const icon = type === 'success' ? 'fa-check-circle' : 
                     type === 'error' ? 'fa-exclamation-triangle' : 
                     'fa-info-circle';
        
        toast.innerHTML = `
            <i class="fas ${icon}" aria-hidden="true"></i>
            <div class="toast-message">${message}</div>
        `;
        
        toastContainer.appendChild(toast);
        
        setTimeout(() => {
            toast.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        }, duration);
    }

    // ========== PREVIEW MODAL ==========
    previewBtn.addEventListener('click', () => {
        const formData = new FormData(form);
        const preview = `
            <p><strong>Nombre:</strong> <span>${formData.get('name') || '‚Äî'}</span></p>
            <p><strong>Email:</strong> <span>${formData.get('email') || '‚Äî'}</span></p>
            <p><strong>Tel√©fono:</strong> <span>${formData.get('phone') || '‚Äî'}</span></p>
            <p><strong>Fecha:</strong> <span>${formData.get('date') ? new Date(formData.get('date')).toLocaleDateString('es-MX', {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'}) : '‚Äî'}</span></p>
            <p><strong>Hora:</strong> <span>${formData.get('time') || '‚Äî'}</span></p>
            <p><strong>Invitados:</strong> <span>${formData.get('guests') || '‚Äî'}</span></p>
            <p><strong>Peticiones:</strong> <span>${formData.get('message') || 'Sin peticiones especiales'}</span></p>
        `;
        
        document.getElementById('previewContent').innerHTML = preview;
        previewModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    });

    document.getElementById('closePreviewModal').addEventListener('click', () => {
        previewModal.style.display = 'none';
        document.body.style.overflow = '';
    });

    document.getElementById('editFromPreview').addEventListener('click', () => {
        previewModal.style.display = 'none';
        document.body.style.overflow = '';
        fields.name.focus();
    });

    document.getElementById('confirmFromPreview').addEventListener('click', () => {
        previewModal.style.display = 'none';
        document.body.style.overflow = '';
        form.dispatchEvent(new Event('submit'));
    });

    // ========== SUCCESS MODAL ==========
    document.getElementById('closeSuccessModal').addEventListener('click', () => {
        successModal.style.display = 'none';
        document.body.style.overflow = '';
    });

    // Cerrar modales con Escape
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            if (previewModal.style.display === 'flex') {
                previewModal.style.display = 'none';
                document.body.style.overflow = '';
            }
            if (successModal.style.display === 'flex') {
                successModal.style.display = 'none';
                document.body.style.overflow = '';
            }
        }
    });

    // ========== MENSAJE PERSONALIZADO POR DOMINIO ==========
    function getEmailDomainMessage(email) {
        const domain = (email.split('@')[1] || '').toLowerCase();
        let message = `Hemos enviado la confirmaci√≥n a <strong>${email}</strong>.`;
        
        if (domain.includes('gmail.com')) {
            message += '<br><br>üìß <strong>Usuarios Gmail:</strong> Revisa tu pesta√±a "Principal" o "Promociones".';
        } else if (domain.includes('hotmail') || domain.includes('outlook') || domain.includes('live')) {
            message += '<br><br>üìß <strong>Usuarios Outlook/Hotmail:</strong> Revisa tambi√©n la carpeta "Correo no deseado".';
        } else if (domain.includes('yahoo')) {
            message += '<br><br>üìß <strong>Usuarios Yahoo:</strong> Si no aparece en la bandeja de entrada, revisa "Spam".';
        }
        
        message += `<br><br>Si no recibes el correo en 5 minutos, cont√°ctanos: <a href="mailto:${EMAILJS_CONFIG.ADMIN_EMAIL}" class="link-gold">${EMAILJS_CONFIG.ADMIN_EMAIL}</a>`;
        
        return message;
    }

    // ========== ENV√çO DEL FORMULARIO ==========
    form.addEventListener('submit', async function(e) {
        e.preventDefault();

        // Validar honeypot (anti-spam)
        if (fields.honeypot.value) {
            console.warn('Honeypot detectado - posible spam');
            showToast('Error al procesar la solicitud', 'error');
            return;
        }

        // Validar formulario
        if (!validateForm()) {
            showToast('Por favor corrige los errores en el formulario', 'error');
            return;
        }

        // Verificar rate limit
        if (!checkRateLimit()) {
            return;
        }

        // Deshabilitar bot√≥n
        submitBtn.disabled = true;
        const originalText = submitBtn.querySelector('span').textContent;
        submitBtn.querySelector('span').textContent = 'ENVIANDO...';
        submitBtn.querySelector('i').className = 'fas fa-spinner fa-spin';

        const formData = new FormData(form);
        const payload = {
            user_name: formData.get('name'),
            user_email: formData.get('email'),
            user_phone: formData.get('phone'),
            date: formData.get('date'),
            time: formData.get('time'),
            guests: formData.get('guests'),
            notes: formData.get('message') || 'Sin peticiones especiales',
            reservation_id: 'VALHALLA-' + Date.now() + '-' + Math.floor(Math.random() * 9000 + 1000)
        };

        // Verificar configuraci√≥n EmailJS
        const hasEmailJS = EMAILJS_CONFIG.SERVICE_ID && EMAILJS_CONFIG.TEMPLATE_CLIENT_ID && EMAILJS_CONFIG.PUBLIC_KEY;

        if (!hasEmailJS) {
            // Modo demostraci√≥n
            setTimeout(() => {
                const message = `
                    <p>${payload.user_name}, tu reserva ha sido registrada exitosamente.</p>
                    <p><strong>ID de Reserva:</strong> ${payload.reservation_id}</p>
                    ${getEmailDomainMessage(payload.user_email)}
                    <p style="margin-top: 1rem; padding: 1rem; background: rgba(255,165,0,0.1); border-radius: 8px; font-size: 0.9rem;">
                        ‚ö†Ô∏è <strong>Modo demo:</strong> Configura EmailJS con tus credenciales para env√≠o real.
                    </p>
                `;
                
                document.getElementById('successMessage').innerHTML = message;
                successModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                
                showToast('Reserva creada (modo demo)', 'success', 5000);
                
                submitBtn.disabled = false;
                submitBtn.querySelector('span').textContent = originalText;
                submitBtn.querySelector('i').className = 'fas fa-magic';
                
                form.reset();
                Object.keys(fields).forEach(key => {
                    if (fields[key]) {
                        fields[key].classList.remove('error', 'success');
                    }
                });
            }, 1500);
            
            return;
        }

        try {
            // Preparar par√°metros para EmailJS
            const templateParams = {
                user_name: payload.user_name,
                user_email: payload.user_email,
                user_phone: payload.user_phone,
                date: new Date(payload.date).toLocaleDateString('es-MX', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                }),
                time: payload.time,
                guests: payload.guests,
                notes: payload.notes,
                reservation_id: payload.reservation_id,
                reply_to: payload.user_email
            };

            // Enviar email al cliente
            await emailjs.send(
                EMAILJS_CONFIG.SERVICE_ID,
                EMAILJS_CONFIG.TEMPLATE_CLIENT_ID,
                templateParams
            );

            // Registrar intento
            addRateLimitAttempt();

            // Mostrar modal de √©xito
            const message = `
                <p>${payload.user_name}, tu ritual ha sido confirmado exitosamente.</p>
                <p><strong>ID de Reserva:</strong> ${payload.reservation_id}</p>
                <p><strong>Fecha:</strong> ${templateParams.date}</p>
                <p><strong>Hora:</strong> ${payload.time}</p>
                <p><strong>Invitados:</strong> ${payload.guests}</p>
                ${getEmailDomainMessage(payload.user_email)}
            `;
            
            document.getElementById('successMessage').innerHTML = message;
            successModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            showToast('‚ú® Reserva confirmada exitosamente', 'success', 5000);
            
            // Resetear formulario
            form.reset();
            Object.keys(fields).forEach(key => {
                if (fields[key]) {
                    fields[key].classList.remove('error', 'success');
                }
            });
            
        } catch (error) {
            console.error('Error al enviar reserva:', error);
            showToast('Error al enviar la reserva. Por favor intenta nuevamente.', 'error', 6000);
            
            // Log detallado para debugging
            if (error.text) {
                console.error('EmailJS Error:', error.text);
            }
        } finally {
            submitBtn.disabled = false;
            submitBtn.querySelector('span').textContent = originalText;
            submitBtn.querySelector('i').className = 'fas fa-magic';
        }
    });

})();
</script>

<style>
@keyframes slideOutRight {
    to {
        opacity: 0;
        transform: translateX(100px);
    }
}
</style>

<!-- PARTE 5: FOOTER COMPLETO + EFECTOS VISUALES -->
<!-- Esto se inserta despu√©s de la secci√≥n de reservas, antes del cierre de </main> -->

</main>

<!-- ========== FOOTER SECTION ========== -->
<footer id="contact">
    <div class="footer-content">
        <!-- Ubicaci√≥n -->
        <div class="footer-section">
            <h3>UBICACI√ìN</h3>
            <address style="font-style: normal;">
                <p>
                    <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                    Calle Oculta (Casa de Dante)<br>
                    Acapulco de Ju√°rez, Guerrero<br>
                    M√©xico
                </p>
                <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    Solo para iniciados
                </p>
            </address>
            
            <!-- Google Maps Link -->
            <a href="https://maps.google.com/?q=Acapulco+Guerrero" 
               target="_blank" 
               rel="noopener noreferrer"
               class="map-link"
               aria-label="Ver ubicaci√≥n en Google Maps">
                <i class="fas fa-directions" aria-hidden="true"></i>
                C√≥mo llegar
            </a>
        </div>
        
        <!-- Horario -->
        <div class="footer-section">
            <h3>HORARIO</h3>
            <ul class="schedule-list">
                <li>
                    <span class="day">Martes - S√°bado</span>
                    <span class="hours">20:00 - 02:00</span>
                </li>
                <li class="closed">
                    <span class="day">Domingo</span>
                    <span class="hours">Eventos privados</span>
                </li>
                <li class="closed">
                    <span class="day">Lunes</span>
                    <span class="hours">Cerrado</span>
                </li>
            </ul>
            
            <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                <i class="fas fa-info-circle" aria-hidden="true"></i>
                Reservaciones requeridas
            </p>
        </div>
        
        <!-- Conexi√≥n -->
        <div class="footer-section">
            <h3>CONEXI√ìN</h3>
            <p style="margin-bottom: 1rem;">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                <a href="mailto:contacto@valhalla.com" class="footer-link">
                    contacto@valhalla.com
                </a>
            </p>
            <p style="margin-bottom: 1.5rem;">
                <i class="fas fa-phone" aria-hidden="true"></i>
                <a href="tel:+527441234567" class="footer-link">
                    +52 (744) 123-4567
                </a>
            </p>
            
            <div class="social-links" role="list" aria-label="Redes sociales">
                <a href="mailto:contacto@valhalla.com" 
                   class="social-link" 
                   title="Enviar correo"
                   aria-label="Enviar correo electr√≥nico">
                    <i class="fas fa-envelope" aria-hidden="true"></i>
                </a>
                <a href="https://www.facebook.com/valhalla.acapulco" 
                   class="social-link facebook" 
                   target="_blank"
                   rel="noopener noreferrer"
                   title="S√≠guenos en Facebook"
                   aria-label="Visitar p√°gina de Facebook">
                    <i class="fab fa-facebook-f" aria-hidden="true"></i>
                </a>
                <a href="https://www.instagram.com/valhalla.acapulco" 
                   class="social-link instagram" 
                   target="_blank"
                   rel="noopener noreferrer"
                   title="S√≠guenos en Instagram"
                   aria-label="Visitar perfil de Instagram">
                    <i class="fab fa-instagram" aria-hidden="true"></i>
                </a>
                <a href="https://wa.me/527441234567" 
                   class="social-link whatsapp" 
                   target="_blank"
                   rel="noopener noreferrer"
                   title="Contactar por WhatsApp"
                   aria-label="Enviar mensaje por WhatsApp">
                    <i class="fab fa-whatsapp" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
    

    
    <!-- Copyright -->
    <div class="copyright">
        <p>
            ¬© <span id="currentYear"></span> VALHALLA | Todos los rituales reservados | Sanctum of Liquid Alchemy
        </p>

    </div>
    
    <!-- Back to top button -->
    <button 
        id="backToTop" 
        class="back-to-top" 
        aria-label="Volver al inicio"
        title="Volver arriba">
        <i class="fas fa-arrow-up" aria-hidden="true"></i>
    </button>
</footer>

<!-- ========== EFECTOS VISUALES DE FONDO ========== -->

<!-- Liquid Morphing Background -->
<div class="liquid-morph-bg" aria-hidden="true">
    <div class="liquid-blob"></div>
    <div class="liquid-blob"></div>
    <div class="liquid-blob"></div>
</div>

<!-- Aurora Borealis Effect -->
<div class="aurora-container" aria-hidden="true">
    <div class="aurora"></div>
    <div class="aurora"></div>
    <div class="aurora"></div>
</div>

<!-- Plasma Background -->
<div class="plasma-bg" aria-hidden="true"></div>

<!-- Matrix Rain Effect -->
<div class="matrix-rain" id="matrixRain" aria-hidden="true"></div>

<!-- Particles Container -->
<div class="particles" id="particlesContainer" aria-hidden="true"></div>

<!-- Vortex Animation -->
<div class="vortex-container" aria-hidden="true">
    <div class="vortex" style="animation-delay: 0s;"></div>
    <div class="vortex" style="animation-delay: 5s;"></div>
    <div class="vortex" style="animation-delay: 10s;"></div>
</div>

<!-- CSS COMPLETO PARA FOOTER Y EFECTOS -->
<style>
    /* ========== FOOTER STYLES ========== */
    footer {
        background: var(--black-void);
        padding: 4rem 2rem 2rem;
        text-align: center;
        border-top: 1px solid var(--smoke);
        position: relative;
        overflow: hidden;
    }

    .footer-content {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 4rem;
        max-width: 1400px;
        margin: 0 auto 3rem;
    }

    .footer-section h3 {
        color: var(--gold-accent);
        margin-bottom: 1.5rem;
        letter-spacing: 0.2rem;
        font-weight: 300;
        font-size: 1.2rem;
    }

    .footer-section p {
        color: var(--text-secondary);
        line-height: 1.8;
        margin: 0.5rem 0;
    }

    .footer-section i {
        margin-right: 0.5rem;
        color: var(--gold-accent);
    }

    .footer-link {
        color: var(--text-secondary);
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .footer-link:hover {
        color: var(--gold-accent);
        text-decoration: underline;
    }

    /* Map Link */
    .map-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 1rem;
        padding: 0.6rem 1.2rem;
        background: rgba(212,175,55,0.08);
        border: 1px solid rgba(212,175,55,0.2);
        border-radius: 6px;
        color: var(--gold-accent);
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }

    .map-link:hover {
        background: rgba(212,175,55,0.15);
        border-color: var(--gold-accent);
        transform: translateY(-2px);
    }

    /* Schedule List */
    .schedule-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .schedule-list li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.8rem;
        margin-bottom: 0.5rem;
        background: rgba(212,175,55,0.03);
        border-radius: 6px;
        border-left: 3px solid var(--gold-accent);
    }

    .schedule-list li.closed {
        border-left-color: var(--text-muted);
        opacity: 0.6;
    }

    .schedule-list .day {
        color: var(--gold-accent);
        font-weight: 600;
        font-size: 0.9rem;
    }

    .schedule-list .hours {
        color: var(--text-secondary);
        font-size: 0.85rem;
    }

    /* Social Links */
    .social-links {
        display: flex;
        gap: 1.5rem;
        justify-content: center;
        margin-top: 1rem;
    }

    .social-link {
        width: 45px;
        height: 45px;
        border: 2px solid var(--gold-accent);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--gold-accent);
        text-decoration: none;
        transition: all 0.3s ease;
        font-size: 1.2rem;
        border-radius: 50%;
        position: relative;
        overflow: hidden;
    }

    .social-link::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: var(--gold-accent);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.4s ease;
        z-index: -1;
    }

    .social-link:hover::before {
        width: 100%;
        height: 100%;
    }

    .social-link:hover {
        color: var(--black-void);
        transform: translateY(-5px) rotate(360deg);
        box-shadow: 0 10px 30px rgba(212,175,55,0.4);
    }

    .social-link:focus-visible {
        outline: 3px solid var(--gold-accent);
        outline-offset: 3px;
    }

    /* Efectos espec√≠ficos por red social */
    .social-link.facebook:hover {
        border-color: #1877f2;
    }

    .social-link.facebook:hover::before {
        background: #1877f2;
    }

    .social-link.instagram:hover {
        border-color: #e1306c;
    }

    .social-link.instagram:hover::before {
        background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
    }

    .social-link.whatsapp:hover {
        border-color: #25d366;
    }

    .social-link.whatsapp:hover::before {
        background: #25d366;
    }

    

    /* Copyright */
    .copyright {
        color: var(--text-muted);
        font-size: 0.9rem;
        letter-spacing: 0.1rem;
        margin-top: 2rem;
    }

    .copyright p {
        margin: 0.3rem 0;
    }

    /* Back to Top Button */
    .back-to-top {
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 50px;
        height: 50px;
        background: rgba(212,175,55,0.2);
        border: 2px solid var(--gold-accent);
        border-radius: 50%;
        color: var(--gold-accent);
        font-size: 1.2rem;
        cursor: pointer;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 9999;
        backdrop-filter: blur(10px);
    }

    .back-to-top.visible {
        opacity: 1;
        visibility: visible;
    }

    .back-to-top:hover {
        background: var(--gold-accent);
        color: var(--black-void);
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(212,175,55,0.4);
    }

    .back-to-top:focus-visible {
        outline: 3px solid var(--gold-accent);
        outline-offset: 3px;
    }

    /* ========== EFECTOS VISUALES DE FONDO ========== */
    
    /* Liquid Morphing Background */
    .liquid-morph-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
        opacity: 0.05;
        pointer-events: none;
    }
    
    .liquid-blob {
        position: absolute;
        width: 40%;
        height: 40%;
        background: radial-gradient(circle at 30% 30%, var(--gold-accent), transparent);
        filter: blur(40px);
        border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
        animation: liquid-morph 20s infinite ease-in-out;
    }
    
    .liquid-blob:nth-child(1) {
        top: -10%;
        left: -10%;
        animation-delay: 0s;
    }
    
    .liquid-blob:nth-child(2) {
        bottom: -10%;
        right: -10%;
        background: radial-gradient(circle at 70% 70%, var(--blood-accent), transparent);
        animation-delay: 10s;
        animation-duration: 25s;
    }
    
    .liquid-blob:nth-child(3) {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 30%;
        height: 30%;
        background: radial-gradient(circle at 50% 50%, var(--whiskey), transparent);
        animation-delay: 5s;
        animation-duration: 30s;
    }
    
    @keyframes liquid-morph {
        0%, 100% {
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            transform: rotate(0deg) scale(1);
        }
        25% {
            border-radius: 70% 30% 50% 50% / 30% 70% 30% 70%;
            transform: rotate(90deg) scale(1.1);
        }
        50% {
            border-radius: 30% 70% 70% 30% / 50% 30% 70% 40%;
            transform: rotate(180deg) scale(0.9);
        }
        75% {
            border-radius: 60% 40% 30% 70% / 70% 30% 50% 60%;
            transform: rotate(270deg) scale(1.05);
        }
    }
    
    /* Aurora Borealis Effect */
    .aurora-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        pointer-events: none;
        z-index: -2;
        overflow: hidden;
    }
    
    .aurora {
        position: absolute;
        width: 200%;
        height: 60%;
        background: linear-gradient(135deg, 
            transparent 20%, 
            rgba(212,175,55,0.03) 40%, 
            rgba(139,0,0,0.02) 60%, 
            rgba(112,66,20,0.03) 80%, 
            transparent);
        filter: blur(60px);
        opacity: 0;
        animation: aurora-wave 15s infinite ease-in-out;
    }
    
    .aurora:nth-child(1) {
        top: -30%;
        left: -50%;
        animation-delay: 0s;
    }
    
    .aurora:nth-child(2) {
        bottom: -30%;
        right: -50%;
        animation-delay: 5s;
        transform: rotate(180deg);
    }
    
    .aurora:nth-child(3) {
        top: 20%;
        left: -30%;
        animation-delay: 10s;
        transform: rotate(45deg);
    }
    
    @keyframes aurora-wave {
        0%, 100% {
            opacity: 0;
            transform: translateX(0) translateY(0);
        }
        50% {
            opacity: 0.6;
            transform: translateX(100px) translateY(-50px);
        }
    }
    
    /* Plasma Background */
    .plasma-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -4;
        opacity: 0.03;
        pointer-events: none;
        background: 
            radial-gradient(circle at 20% 50%, var(--gold-accent) 0%, transparent 50%),
            radial-gradient(circle at 80% 50%, var(--blood-accent) 0%, transparent 50%),
            radial-gradient(circle at 50% 20%, var(--whiskey) 0%, transparent 50%),
            radial-gradient(circle at 50% 80%, var(--gold-accent) 0%, transparent 50%);
        background-size: 50% 50%;
        animation: plasma-move 20s ease-in-out infinite;
    }
    
    @keyframes plasma-move {
        0%, 100% { background-position: 0% 0%, 100% 100%, 50% 50%, 50% 50%; }
        25% { background-position: 100% 100%, 0% 0%, 100% 0%, 0% 100%; }
        50% { background-position: 50% 50%, 50% 50%, 0% 100%, 100% 0%; }
        75% { background-position: 0% 100%, 100% 0%, 50% 0%, 50% 100%; }
    }
    
    /* Matrix Rain Effect */
    .matrix-rain {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -3;
        overflow: hidden;
        opacity: 0.02;
    }
    
    .matrix-drop {
        position: absolute;
        color: var(--gold-accent);
        font-family: monospace;
        font-size: 14px;
        animation: matrix-fall linear;
        opacity: 0.7;
    }
    
    @keyframes matrix-fall {
        to {
            transform: translateY(100vh);
            opacity: 0;
        }
    }
    
    /* Vortex Animation */
    .vortex-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
        z-index: -5;
        opacity: 0.03;
    }
    
    .vortex {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 500px;
        height: 500px;
        margin: -250px 0 0 -250px;
        border: 2px solid rgba(212,175,55,0.1);
        border-radius: 50%;
        animation: vortex-spin 30s linear infinite;
    }
    
    @keyframes vortex-spin {
        0% { 
            transform: rotate(0deg) scale(1); 
            opacity: 0.3;
        }
        100% { 
            transform: rotate(360deg) scale(0.1); 
            opacity: 0;
        }
    }
    
    /* Particles */
    .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
    }
    
    .particle {
        position: absolute;
        width: 2px;
        height: 2px;
        background: var(--gold-accent);
        opacity: 0.3;
        animation: particle-float 15s infinite linear;
        border-radius: 50%;
    }
    
    @keyframes particle-float {
        from {
            transform: translateY(100vh) translateX(0);
            opacity: 0.3;
        }
        to {
            transform: translateY(-100px) translateX(100px);
            opacity: 0;
        }
    }
    
    /* ========== RESPONSIVE ========== */
    @media (max-width: 1024px) {
        .footer-content {
            grid-template-columns: repeat(2, 1fr);
            gap: 3rem;
        }
        
        .footer-section:last-child {
            grid-column: 1 / -1;
        }
    }
    
    @media (max-width: 768px) {
        footer {
            padding: 3rem 1.5rem 2rem;
        }
        
        .footer-content {
            grid-template-columns: 1fr;
            gap: 2.5rem;
        }
        
        .footer-section:last-child {
            grid-column: auto;
        }
        
        .social-links {
            gap: 1rem;
        }
        
        .social-link {
            width: 40px;
            height: 40px;
            font-size: 1.1rem;
        }
        
        .back-to-top {
            bottom: 80px;
            right: 20px;
            width: 45px;
            height: 45px;
        }
        
        .footer-legal nav {
            flex-direction: column;
            gap: 0.8rem;
        }
    }
    
    @media (max-width: 480px) {
        .schedule-list li {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.3rem;
        }
        
        .copyright {
            font-size: 0.8rem;
        }
    }
    
    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
        .liquid-blob,
        .aurora,
        .plasma-bg,
        .vortex,
        .particle,
        .social-link {
            animation: none !important;
        }
        
        .social-link:hover {
            transform: none !important;
        }
    }
</style>

<!-- JAVASCRIPT PARA EFECTOS Y FUNCIONALIDADES DEL FOOTER -->
<script>
(function() {
    'use strict';
    
    // ========== CURRENT YEAR ==========
    document.getElementById('currentYear').textContent = new Date().getFullYear();
    
    // ========== BACK TO TOP BUTTON ==========
    const backToTop = document.getElementById('backToTop');
    
    window.addEventListener('scroll', () => {
        if (window.pageYOffset > 500) {
            backToTop.classList.add('visible');
        } else {
            backToTop.classList.remove('visible');
        }
    });
    
    backToTop.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
    
    // ========== MATRIX RAIN EFFECT ==========
    function createMatrixRain() {
        const container = document.getElementById('matrixRain');
        if (!container) return;
        
        const characters = '„É¥„Ç°„É´„Éè„É©VALHALLA01';
        const columns = Math.floor(window.innerWidth / 20);
        
        for (let i = 0; i < columns; i++) {
            const drop = document.createElement('span');
            drop.className = 'matrix-drop';
            drop.textContent = characters[Math.floor(Math.random() * characters.length)];
            drop.style.left = `${i * 20}px`;
            drop.style.animationDuration = `${Math.random() * 10 + 10}s`;
            drop.style.animationDelay = `${Math.random() * 5}s`;
            container.appendChild(drop);
        }
    }
    
    // ========== PARTICLES GENERATOR ==========
    function createParticles() {
        const container = document.getElementById('particlesContainer');
        if (!container) return;
        
        const particleCount = window.innerWidth < 768 ? 30 : 50;
        
        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 15 + 's';
            particle.style.animationDuration = (15 + Math.random() * 10) + 's';
            particle.style.width = particle.style.height = (Math.random() * 2 + 1) + 'px';
            container.appendChild(particle);
        }
    }
    
    // Initialize effects
    if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
        createMatrixRain();
        createParticles();
    }
    
    // ========== SMOOTH SCROLL FOR FOOTER LINKS ==========
    document.querySelectorAll('footer a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href === '#privacy-policy' || href === '#terms' || href === '#cookies') {
                e.preventDefault();
                alert('Secci√≥n en construcci√≥n. Esta funcionalidad estar√° disponible pr√≥ximamente.');
            }
        });
    });
    
    // ========== SOCIAL LINKS ANALYTICS (opcional) ==========
    document.querySelectorAll('.social-link').forEach(link => {
        link.addEventListener('click', function() {
            const platform = this.title || this.getAttribute('aria-label');
            console.log(`Social link clicked: ${platform}`);
            // Aqu√≠ puedes agregar tracking de Google Analytics
            // gtag('event', 'social_click', { 'platform': platform });
        });
    });
    
})();
</script>

<!-- PARTE 6 FINAL: JAVASCRIPT COMPLETO + MOBILE MENU + CSS FALTANTE -->

<!-- Este c√≥digo se agrega al final del HTML, antes del cierre de </body> -->

<!-- ========== CSS FALTANTE DE SECCIONES ORIGINALES ========== -->
<style>
    /* ========== BASE STYLES COMPLETADOS ========== */
    
    /* Sections */
    .section {
        padding: 8rem 4rem;
        position: relative;
        background: var(--obsidian);
    }

    .section:nth-child(even) {
        background: var(--midnight);
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .section-title {
        font-size: 3rem;
        font-weight: 100;
        letter-spacing: 0.5rem;
        margin-bottom: 3rem;
        text-align: center;
        position: relative;
    }

    .section-title::after {
        content: '';
        position: absolute;
        bottom: -1rem;
        left: 50%;
        transform: translateX(-50%);
        width: 100px;
        height: 1px;
        background: var(--gold-accent);
    }

    /* Signature Title (Shimmer effect) */
    .signature-title {
        font-size: 4rem;
        text-align: center;
        margin: 3rem 0 5rem;
        background: linear-gradient(90deg, var(--gold-accent), #fff, var(--gold-accent));
        background-size: 200% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: shimmer 3s linear infinite;
    }

    @keyframes shimmer {
        0% { background-position: 0% 50%; }
        100% { background-position: 200% 50%; }
    }

    /* Glitch Effect */
    .glitch {
        position: relative;
        color: var(--gold-accent);
        font-size: 4rem;
        font-weight: 100;
        text-transform: uppercase;
        letter-spacing: 0.5rem;
    }

    .glitch::before,
    .glitch::after {
        content: attr(data-text);
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    .glitch::before {
        animation: glitch-1 0.5s infinite;
        color: var(--blood-accent);
        z-index: -1;
    }

    .glitch::after {
        animation: glitch-2 0.5s infinite;
        color: var(--whiskey);
        z-index: -2;
    }

    @keyframes glitch-1 {
        0% { clip-path: inset(40% 0 61% 0); transform: translate(0); }
        20% { clip-path: inset(92% 0 1% 0); transform: translate(-2px, 2px); }
        40% { clip-path: inset(43% 0 1% 0); transform: translate(-2px, -2px); }
        60% { clip-path: inset(25% 0 58% 0); transform: translate(2px, 2px); }
        80% { clip-path: inset(54% 0 7% 0); transform: translate(2px, -2px); }
        100% { clip-path: inset(58% 0 43% 0); transform: translate(0); }
    }

    @keyframes glitch-2 {
        0% { clip-path: inset(65% 0 8% 0); transform: translate(0); }
        20% { clip-path: inset(40% 0 44% 0); transform: translate(2px, 2px); }
        40% { clip-path: inset(51% 0 25% 0); transform: translate(2px, -2px); }
        60% { clip-path: inset(10% 0 58% 0); transform: translate(-2px, 2px); }
        80% { clip-path: inset(35% 0 31% 0); transform: translate(-2px, -2px); }
        100% { clip-path: inset(42% 0 14% 0); transform: translate(0); }
    }

    /* ========== MOBILE MENU ========== */
    .mobile-menu-toggle {
        display: none;
        background: transparent;
        border: 2px solid var(--gold-accent);
        color: var(--gold-accent);
        width: 45px;
        height: 45px;
        border-radius: 8px;
        cursor: pointer;
        position: relative;
        z-index: 1001;
        transition: all 0.3s ease;
    }

    .mobile-menu-toggle:hover {
        background: rgba(212,175,55,0.1);
        transform: scale(1.05);
    }

    .mobile-menu-toggle:focus-visible {
        outline: 3px solid var(--gold-accent);
        outline-offset: 3px;
    }

    .hamburger {
        position: relative;
        width: 24px;
        height: 2px;
        background: var(--gold-accent);
        transition: all 0.3s ease;
    }

    .hamburger::before,
    .hamburger::after {
        content: '';
        position: absolute;
        width: 24px;
        height: 2px;
        background: var(--gold-accent);
        transition: all 0.3s ease;
    }

    .hamburger::before {
        top: -8px;
    }

    .hamburger::after {
        bottom: -8px;
    }

    .mobile-menu-toggle.active .hamburger {
        background: transparent;
    }

    .mobile-menu-toggle.active .hamburger::before {
        top: 0;
        transform: rotate(45deg);
    }

    .mobile-menu-toggle.active .hamburger::after {
        bottom: 0;
        transform: rotate(-45deg);
    }

    .mobile-menu-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.95);
        backdrop-filter: blur(10px);
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .mobile-menu-overlay.active {
        display: flex;
        opacity: 1;
    }

    .mobile-menu-content {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 2rem;
        transform: translateY(-30px);
        transition: transform 0.3s ease;
    }

    .mobile-menu-overlay.active .mobile-menu-content {
        transform: translateY(0);
    }

    .mobile-nav-links {
        list-style: none;
        padding: 0;
        margin: 0;
        text-align: center;
    }

    .mobile-nav-links li {
        margin: 1.5rem 0;
        opacity: 0;
        transform: translateX(-30px);
        transition: all 0.3s ease;
    }

    .mobile-menu-overlay.active .mobile-nav-links li {
        opacity: 1;
        transform: translateX(0);
    }

    .mobile-nav-links li:nth-child(1) { transition-delay: 0.1s; }
    .mobile-nav-links li:nth-child(2) { transition-delay: 0.15s; }
    .mobile-nav-links li:nth-child(3) { transition-delay: 0.2s; }
    .mobile-nav-links li:nth-child(4) { transition-delay: 0.25s; }
    .mobile-nav-links li:nth-child(5) { transition-delay: 0.3s; }
    .mobile-nav-links li:nth-child(6) { transition-delay: 0.35s; }

    .mobile-nav-links a {
        color: #fff;
        text-decoration: none;
        font-size: 1.8rem;
        letter-spacing: 0.2rem;
        transition: all 0.3s ease;
        display: inline-block;
        position: relative;
        padding: 0.5rem 1rem;
    }

    .mobile-nav-links a::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 2px;
        background: var(--gold-accent);
        transition: width 0.3s ease;
    }

    .mobile-nav-links a:hover,
    .mobile-nav-links a:focus {
        color: var(--gold-accent);
        transform: scale(1.1);
    }

    .mobile-nav-links a:hover::after,
    .mobile-nav-links a:focus::after {
        width: 100%;
    }

    /* ========== RESPONSIVE ADJUSTMENTS ========== */
    @media (max-width: 768px) {
        nav {
            padding: 1rem 2rem;
        }

        .nav-links {
            display: none;
        }

        .mobile-menu-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-title {
            font-size: 3rem;
            letter-spacing: 0.5rem;
        }

        .hero-subtitle {
            font-size: 1rem;
        }

        .section {
            padding: 4rem 2rem;
        }

        .section-title {
            font-size: 2rem;
            letter-spacing: 0.3rem;
        }

        .signature-title {
            font-size: 2rem;
        }

        .glitch {
            font-size: 2rem;
        }
    }

    @media (max-width: 480px) {
        .hero-title {
            font-size: 2.5rem;
            letter-spacing: 0.3rem;
        }

        .hero-cta {
            padding: 0.8rem 2rem;
            font-size: 0.85rem;
        }

        .section {
            padding: 3rem 1.5rem;
        }
    }

    /* ========== LOADING ANIMATIONS ========== */
    .reveal {
        opacity: 0;
        transform: translateY(50px);
        transition: all 1s ease;
    }

    .reveal.active {
        opacity: 1;
        transform: translateY(0);
    }

    /* ========== UTILITY CLASSES ========== */
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-right { text-align: right; }
    
    .mt-1 { margin-top: 0.5rem; }
    .mt-2 { margin-top: 1rem; }
    .mt-3 { margin-top: 1.5rem; }
    .mt-4 { margin-top: 2rem; }
    
    .mb-1 { margin-bottom: 0.5rem; }
    .mb-2 { margin-bottom: 1rem; }
    .mb-3 { margin-bottom: 1.5rem; }
    .mb-4 { margin-bottom: 2rem; }

    /* ========== CURSOR TRAIL (Optimizado) ========== */
    .cursor-trail {
        position: fixed;
        width: 10px;
        height: 10px;
        background: radial-gradient(circle, rgba(212,175,55,0.5) 0%, transparent 70%);
        pointer-events: none;
        border-radius: 50%;
        z-index: 9999;
        transform: translate(-50%, -50%);
        opacity: 0;
        transition: opacity 0.5s ease-out;
    }

    /* ========== SCROLL PROGRESS BAR ========== */
    .scroll-progress {
        position: fixed;
        top: 0;
        left: 0;
        width: 0%;
        height: 3px;
        background: linear-gradient(90deg, var(--gold-accent), var(--blood-accent));
        z-index: 10001;
        transition: width 0.1s ease;
    }
</style>

<!-- Mobile Menu HTML -->
<div class="mobile-menu-overlay" id="mobileMenu" aria-hidden="true">
    <div class="mobile-menu-content">
        <ul class="mobile-nav-links" role="menu">
            <li role="none"><a href="#home" role="menuitem">INICIO</a></li>
            <li role="none"><a href="#cocktails" role="menuitem">COCKTAILS</a></li>
            <li role="none"><a href="#experience" role="menuitem">EXPERIENCIA</a></li>
            <li role="none"><a href="#philosophy" role="menuitem">FILOSOF√çA</a></li>
            <li role="none"><a href="#ritual" role="menuitem">RITUAL</a></li>
            <li role="none"><a href="#reservation" role="menuitem">RESERVAS</a></li>
            <li role="none"><a href="#contact" role="menuitem">CONTACTO</a></li>
        </ul>
    </div>
</div>

<!-- Scroll Progress Bar -->
<div class="scroll-progress" id="scrollProgress" role="progressbar" aria-label="Progreso de lectura"></div>

<!-- JAVASCRIPT FINAL COMPLETO -->
<script>
(function() {
    'use strict';

    // ========== MOBILE MENU ==========
    const mobileMenuToggle = document.createElement('button');
    mobileMenuToggle.className = 'mobile-menu-toggle';
    mobileMenuToggle.setAttribute('aria-label', 'Abrir men√∫ de navegaci√≥n');
    mobileMenuToggle.setAttribute('aria-expanded', 'false');
    mobileMenuToggle.innerHTML = '<span class="hamburger"></span>';
    
    const navContainer = document.querySelector('.nav-container');
    if (navContainer) {
        navContainer.appendChild(mobileMenuToggle);
    }

    const mobileMenu = document.getElementById('mobileMenu');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-links a');

    function toggleMobileMenu() {
        const isActive = mobileMenu.classList.contains('active');
        
        if (isActive) {
            closeMobileMenu();
        } else {
            openMobileMenu();
        }
    }

    function openMobileMenu() {
        mobileMenu.classList.add('active');
        mobileMenuToggle.classList.add('active');
        mobileMenu.setAttribute('aria-hidden', 'false');
        mobileMenuToggle.setAttribute('aria-expanded', 'true');
        mobileMenuToggle.setAttribute('aria-label', 'Cerrar men√∫ de navegaci√≥n');
        document.body.style.overflow = 'hidden';
    }

    function closeMobileMenu() {
        mobileMenu.classList.remove('active');
        mobileMenuToggle.classList.remove('active');
        mobileMenu.setAttribute('aria-hidden', 'true');
        mobileMenuToggle.setAttribute('aria-expanded', 'false');
        mobileMenuToggle.setAttribute('aria-label', 'Abrir men√∫ de navegaci√≥n');
        document.body.style.overflow = '';
    }

    mobileMenuToggle.addEventListener('click', toggleMobileMenu);

    // Cerrar al hacer click en un link
    mobileNavLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            closeMobileMenu();
            
            // Smooth scroll
            const href = link.getAttribute('href');
            if (href.startsWith('#')) {
                e.preventDefault();
                const target = document.querySelector(href);
                if (target) {
                    setTimeout(() => {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 300);
                }
            }
        });
    });

    // Cerrar con Escape
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
            closeMobileMenu();
        }
    });

    // Cerrar al hacer click fuera
    mobileMenu.addEventListener('click', (e) => {
        if (e.target === mobileMenu) {
            closeMobileMenu();
        }
    });

    // ========== SCROLL PROGRESS BAR ==========
    const scrollProgress = document.getElementById('scrollProgress');
    
    function updateScrollProgress() {
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollPercent = (scrollTop / (documentHeight - windowHeight)) * 100;
        
        if (scrollProgress) {
            scrollProgress.style.width = scrollPercent + '%';
        }
    }

    window.addEventListener('scroll', updateScrollProgress);
    updateScrollProgress();

    // ========== SMOOTH SCROLL PARA TODOS LOS LINKS INTERNOS ==========
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            
            // Ignorar links de modales/acciones especiales
            if (href === '#privacy-policy' || href === '#terms' || href === '#cookies') {
                return;
            }
            
            const target = document.querySelector(href);
            if (target) {
                e.preventDefault();
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // Update URL sin scroll
                if (history.pushState) {
                    history.pushState(null, null, href);
                }
            }
        });
    });

    // ========== CAROUSEL MEJORADO ==========
    const slides = document.querySelectorAll('.carousel-slide');
    const indicators = document.querySelectorAll('.indicator');
    let currentSlide = 0;
    let carouselInterval;

    function changeSlide(index) {
        slides[currentSlide].classList.remove('active');
        slides[currentSlide].setAttribute('aria-hidden', 'true');
        indicators[currentSlide].classList.remove('active');
        indicators[currentSlide].setAttribute('aria-current', 'false');
        
        currentSlide = index;
        
        slides[currentSlide].classList.add('active');
        slides[currentSlide].setAttribute('aria-hidden', 'false');
        indicators[currentSlide].classList.add('active');
        indicators[currentSlide].setAttribute('aria-current', 'true');
    }

    function nextSlide() {
        const next = (currentSlide + 1) % slides.length;
        changeSlide(next);
    }

    function startCarousel() {
        carouselInterval = setInterval(nextSlide, 5000);
    }

    function stopCarousel() {
        clearInterval(carouselInterval);
    }

    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
            changeSlide(index);
            stopCarousel();
            startCarousel(); // Restart
        });
    });

    // Pausar en hover
    const carouselContainer = document.querySelector('.carousel-container');
    if (carouselContainer) {
        carouselContainer.addEventListener('mouseenter', stopCarousel);
        carouselContainer.addEventListener('mouseleave', startCarousel);
    }

    // Iniciar carousel
    if (slides.length > 0) {
        startCarousel();
    }

    // ========== CURSOR TRAIL (Optimizado con throttle) ==========
    let lastTrailTime = 0;
    const trailThrottle = 100; // ms

    if (window.matchMedia('(pointer: fine)').matches && 
        window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
        
        document.addEventListener('mousemove', (e) => {
            const now = Date.now();
            if (now - lastTrailTime < trailThrottle) return;
            lastTrailTime = now;

            const trail = document.createElement('div');
            trail.className = 'cursor-trail';
            trail.style.left = e.clientX + 'px';
            trail.style.top = e.clientY + 'px';
            document.body.appendChild(trail);
            
            setTimeout(() => {
                trail.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                trail.style.opacity = '0';
                trail.style.transform = 'translate(-50%, -50%) scale(3)';
            }, 100);
            
            setTimeout(() => {
                trail.remove();
            }, 600);
        });
    }

    // ========== PARALLAX EFFECT ==========
    function handleParallax() {
        const scrolled = window.pageYOffset;
        const heroContent = document.querySelector('.hero-content');
        const floatingElements = document.querySelectorAll('.floating-element');
        
        if (heroContent && scrolled < window.innerHeight) {
            heroContent.style.transform = `translate(-50%, calc(-50% + ${scrolled * 0.5}px))`;
            heroContent.style.opacity = 1 - (scrolled / window.innerHeight);
        }
        
        floatingElements.forEach((element, index) => {
            const speed = index === 0 ? 0.3 : 0.2;
            element.style.transform = `translateY(${scrolled * speed}px)`;
        });
    }

    let parallaxTicking = false;
    window.addEventListener('scroll', () => {
        if (!parallaxTicking) {
            window.requestAnimationFrame(() => {
                handleParallax();
                parallaxTicking = false;
            });
            parallaxTicking = true;
        }
    });

    // ========== PERFORMANCE: INTERSECTION OBSERVER PARA ANIMACIONES ==========
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };

    const revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
                revealObserver.unobserve(entry.target);
            }
        });
    }, observerOptions);

    document.querySelectorAll('.reveal').forEach(element => {
        revealObserver.observe(element);
    });

    // ========== GOOGLE ANALYTICS 4 READY ==========
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    
    // Descomentar cuando tengas tu GA4 ID
    // gtag('js', new Date());
    // gtag('config', 'G-XXXXXXXXXX');

    // Event tracking helpers
    window.trackEvent = function(category, action, label) {
        console.log('Event tracked:', { category, action, label });
        // gtag('event', action, { 'event_category': category, 'event_label': label });
    };

    // Track important interactions
    document.querySelectorAll('.hero-cta, .cta-button').forEach(button => {
        button.addEventListener('click', () => {
            window.trackEvent('Engagement', 'CTA_Click', button.textContent.trim());
        });
    });

    document.querySelectorAll('.social-link').forEach(link => {
        link.addEventListener('click', () => {
            const platform = link.title || link.getAttribute('aria-label');
            window.trackEvent('Social', 'Social_Click', platform);
        });
    });

    // ========== PERFORMANCE MONITORING ==========
    if (window.performance && window.performance.timing) {
        window.addEventListener('load', () => {
            setTimeout(() => {
                const perfData = window.performance.timing;
                const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
                const connectTime = perfData.responseEnd - perfData.requestStart;
                const renderTime = perfData.domComplete - perfData.domLoading;
                
                console.log('üöÄ Performance Metrics:');
                console.log(`   Page Load Time: ${pageLoadTime}ms`);
                console.log(`   Connect Time: ${connectTime}ms`);
                console.log(`   Render Time: ${renderTime}ms`);
                
                // Enviar a analytics si est√° configurado
                // window.trackEvent('Performance', 'Page_Load', pageLoadTime);
            }, 0);
        });
    }

    // ========== SERVICE WORKER REGISTRATION (PWA Ready) ==========
    if ('serviceWorker' in navigator) {
        // Descomentar cuando tengas service-worker.js
        // window.addEventListener('load', () => {
        //     navigator.serviceWorker.register('/service-worker.js')
        //         .then(reg => console.log('Service Worker registered', reg))
        //         .catch(err => console.log('Service Worker registration failed', err));
        // });
    }

    // ========== CONSOLE ART ==========
    console.log('%c', 'font-size: 1px; padding: 100px 150px; background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgNTAiPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMzAiIGZpbGw9IiNkNGFmMzciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiPlZBTEhBTExBPC90ZXh0Pjwvc3ZnPg==) no-repeat;');
    console.log('%cüç∏ VALHALLA - Sanctum of Liquid Alchemy', 'color: #d4af37; font-size: 16px; font-weight: bold;');
    console.log('%c‚ú® Desarrollado con pasi√≥n por la perfecci√≥n', 'color: #999; font-size: 12px;');
    console.log('%cüíº ¬øInteresado en unirte al equipo? ‚Üí contacto@valhalla.com', 'color: #d4af37; font-size: 12px;');

    // ========== DEBUG MODE ==========
    window.VALHALLA_DEBUG = false;
    
    window.enableDebug = function() {
        window.VALHALLA_DEBUG = true;
        console.log('%cüîß Debug mode enabled', 'color: #51cf66; font-weight: bold;');
        document.body.classList.add('debug-mode');
    };

    // ========== UTILITY FUNCTIONS ==========
    window.VALHALLA = {
        version: '1.0.0',
        scrollToTop: () => window.scrollTo({ top: 0, behavior: 'smooth' }),
        scrollToSection: (id) => {
            const element = document.getElementById(id);
            if (element) element.scrollIntoView({ behavior: 'smooth' });
        },
        trackEvent: window.trackEvent,
        openMobileMenu: openMobileMenu,
        closeMobileMenu: closeMobileMenu
    };

    // ========== INITIALIZATION LOG ==========
    console.log('%c‚úÖ VALHALLA System Initialized', 'color: #51cf66; font-weight: bold;');
    console.log(`   Version: ${window.VALHALLA.version}`);
    console.log(`   Mobile Menu: Active`);
    console.log(`   Scroll Progress: Active`);
    console.log(`   Analytics: Ready`);
    console.log(`   Performance Monitoring: Active`);

})();
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX');
</script>


<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', 'YOUR_PIXEL_ID');
  fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"
/></noscript>

</body>
</html>
